yearMisii=2019;var emgrut=0;var miRutMISII=0;var minombreMisii="";var nAnotaciones=0;var nAlertas=0;var nAlertasE=0;var tknCon=null;var ctrFullData=null;var personaMiSii=null;var inicioActiv=null;var facturadorfpym=null;var correoNoti="";var dirOutCache="";var girosOutCache="";var alertasCache=null;var alertasEmergCache=null;var fonofijo=null;var cacheAlertas="";var attrCache="";var linksAtributosCntrb="";var notifCache="";var corresCache="";var situacionCache="";var direccionesDisplay=false;var represautDisplay=false;var girosDisplay=false;var sociedadesDisplay=false;var ivaDecDisplay=false;var ivaJurDisplay=false;var rentaDecDisplay=false;var callMainactEstad=0;var cntrDeclaraTG=false;var DatosCntrNow="";var DatosCntrNoti="";var DatosCntrAttr="";var DatosCntrAler="";var barside=null;var showimpuestos=0;var paramGrilla={"language":{"sProcessing":"Procesando...","sLengthMenu":"Mostrar _MENU_ registros","sZeroRecords":"No se encontraron resultados","sEmptyTable":"Ningún dato disponible en esta tabla","sInfo":"Mostrando  del _START_ al _END_ de un total de _TOTAL_ registros","sInfoEmpty":"Mostrando  del 0 al 0 de un total de 0 registros","sInfoFiltered":"(filtrado de un total de _MAX_ registros)","sInfoPostFix":"","sSearch":"Buscar:","sUrl":"","sInfoThousands":",","sLoadingRecords":"Cargando...","oPaginate":{"sFirst":"Primero","sLast":"Último","sNext":"Siguiente","sPrevious":"Anterior"},"oAria":{"sSortAscending":": Activar para ordenar la columna de manera ascendente","sSortDescending":": Activar para ordenar la columna de manera descendente"}},searching:false,responsive:true};String.prototype.capitalize=function(){return this.toLowerCase().replace(/\b\w/g,function(m){return m.toUpperCase();});};var waitingDialog=waitingDialog||(function($){'use strict';var $dialog=$('<div class="modal fade modal_verde" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;">'+'<div class="modal-dialog modal-m">'+'<div class="modal-content">'+'<div class="modal-body"><img src="/misii/img/ic_loading_2.gif" style="width: 35px;float: left;"><h3></h3>'+'</div>'+'</div></div></div>');return{show:function(message,options){if(typeof options==='undefined'){options={};}
if(typeof message==='undefined'){message='Cargando...';}
var settings=$.extend({dialogSize:'m',progressType:'',onHide:null},options);$dialog.find('.modal-dialog').attr('class','modal-dialog').addClass('modal-'+settings.dialogSize);$dialog.find('.progress-bar').attr('class','progress-bar');if(settings.progressType){$dialog.find('.progress-bar').addClass('progress-bar-'+settings.progressType);}
$dialog.find('h3').text(message);if(typeof settings.onHide==='function'){$dialog.off('hidden.bs.modal').on('hidden.bs.modal',function(e){settings.onHide.call($dialog);});}
$dialog.modal();},hide:function(){$dialog.modal('hide');}};})(jQuery);function closeNotif(){$('#boxNotif').fadeOut();$(".white_overlay").fadeOut();$('#box_home').css("height","auto");}
$('#menu_datos_contribuyente,#hmenu_datos_contribuyente').bind('click',function(){call_option(112)});$('#menu_comunicados_sii,#menu_comunicados_sii').bind('click',function(){if(showimpuestos==0){call_renta_impuestos();}});function call_renta_impuestos(){var mthd="POST";var URLgo="";var qrstrng="";var tpRspns="html"
var cargBox="";var strHtml="";var cContainerCntr="divAnotaciones";var array=null;URLgo="/cgi_misii/CViewCarta.cgi";tpRspns="json";params="opc=29";$.ajax({type:'POST',url:URLgo+qrstrng,dataType:tpRspns,async:false,data:params,timeout:15000,cache:false,beforeSend:function(){},success:function(response){showimpuestos=showimpuestos+1;var dataResponse=response;if(dataResponse.data.codigoResultado=="0"){var anno_consulta=0;array=dataResponse.data.reportes;for(var i=0;i<array.length;i++){var row=0;anno_consulta=0+array[i].periodo-1;if(array[i].tiene_reporte){addAcordion(array[i].periodo,"¿Cómo se usaron mis impuestos el año  "+anno_consulta+"?",array[i].url_reporte);}}}}});}
function addAcordion(year,titulo,url){var queue='<div class="panel panel-default" id="comacc_'+year+'" onclick="javascript:gotoDiv(\'comacc_'+year+'\')">';queue+='<div class="panel-heading" role="tab" id="comunicaSII'+year+'">';queue+='<h4 class="panel-title">';queue+='<a data-toggle="collapse" data-parent="#accordionComu" class="arrow-click collapsed" href="#collapseComu'+year+'"  aria-expanded="false" aria-controls="collapseComu'+year+'">';queue+='<div class="box_arrow">';queue+='<div class="box_content_arrow"><div class="ic_arrow"></div></div>';queue+='</div>';queue+=titulo;queue+='</a>';queue+='</h4>';queue+='</div>';queue+='<div id="collapseComu'+year+'" class="panel_comunicaciones panel-collapse collapse "  aria-labelledby="comunicaSII'+year+'" role="tabpanel" aria-expanded="false">';queue+='<div class="panel-body">';queue+='<p class="text-justify">Si desea ver su reporte con el detalle, seleccione ingresar.</p>';queue+='<p class="text-center"><strong>';queue+='<a class="btn btn-warning btn-lg font-weight-bold" role="button"  target="_blank" href="'+url+'">Ingresar</a>';queue+='</strong></p>';queue+='</div>';queue+='</div>';queue+='</div>';$('#accordionComu').append(queue);}
var ieUserAgent={init:function(){var ua=navigator.userAgent;this.compatibilityMode=false;var ieRegex=new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");if(ieRegex.exec(ua)==null)
this.exception="The user agent detected does not contai Internet Explorer.";this.renderVersion=parseFloat(RegExp.$1);this.version=this.renderVersion;if(ua.indexOf("Trident/6.0")>-1){if(ua.indexOf("MSIE 7.0")>-1){this.compatibilityMode=true;this.version=10;}}else if(ua.indexOf("Trident/5.0")>-1){if(ua.indexOf("MSIE 7.0")>-1){this.compatibilityMode=true;this.version=9;}}else if(ua.indexOf("Trident/4.0")>-1){if(ua.indexOf("MSIE 7.0")>-1){this.compatibilityMode=true;this.version=8;}}else if(ua.indexOf("MSIE 7.0")>-1)
this.version=7;else
this.version=6;}};ieUserAgent.init();if(navigator.userAgent.search("MSIE")>=0){var val="IE"+ieUserAgent.version;if(ieUserAgent.compatibilityMode){val+=" Modo Compatibilidad  (Emulación IE"+ieUserAgent.renderVersion+" version "+ieUserAgent.version+" )";}
if(ieUserAgent.version<9){location.href="http://www.sii.cl/pagina/intermedia/version_no_compatible.htm";}}
var cgiajax="/cgi_misii/client001.cgi";var container="contenido-mis-datos";var carga="sucxl";var containerIbox="contenido-mis-InBox";var cargaInbox="miCarInBox";var year_choose=0;var cgicarta="/cgi_misii/cartas.cgi";var envio="/cgi_misii/CViewCarta.cgi?";var jwscarta="https://www3.sii.cl/Coreca1Internet/MuestraPdf?";var seepath="https://emin.sii.cl/seeui/see/internet";var notifHead="<p>A continuación, se muestran algunas notificaciones correspondientes a procesos de fiscalización.</p>";var notifText="";var notisimplefHead='<h2>Mi Correspondencia</h2>';var notisimpleText="<p class='none'>A continuación, se muestra su correspondencia correspondiente a procesos de fiscalización:</p>";var represHead="";represHead+='<h2 >Sociedades a las que pertenece el contribuyente';represHead+=" <a class='pull-right hidden-print' href='javascript:printerC(\"collapse7\")'>";represHead+=" <span class='box_certificate'><div class='print_certificate'></div></span>";represHead+=" </a></h2>   "
var represText="<p >A continuación se presentan las  sociedades  o entes en las cuales ud. como contribuyente tiene participación.</p>";var noSociosText="<p>A continuación se presentan la(s) sociedad(es) <strong>sin inicio de actividades vigente</strong> en las cuales usted como contribuyente tiene participación.</p>"
var dialogM="<div id='dialog' title='visualizar documento'> </div>";var represFood="<div class='alert alert-info text-justify' role='alert'>En caso que la información de participación en sociedades no se encuentre actualizada, el representante legal o un tercero autorizado (con poder o mandato general, o bien poder o mandato específico para el trámite en cuestión), debe presentarse en la Unidad del Servicio que le corresponda a la sociedad, para efectuar este trámite. </div>"
var cartasHead='<p class="none">A continuación se muestran algunas cartas y correos informativos enviados.</p>';var sctHead="<p class='text-align'>A continuación podrá ver las diferentes actividades (visitas) que se han sido realizadas por personal del Servicio de Impuestos Internos a sus locales comerciales, o en el lugar donde ha ejercido alguna actividad comercial.</p>";sctHead+="<p class='text-align'>Si presiona el “Ver Visita”, podrá visualizar el comprobante con la información de lo revisado y/o controlado, como también las situaciones que deben ser corregidas, en caso de habérselas indicado.</p> ";sctHead+="<p class='text-align'>Este comprobante fue enviado al mail que actualmente registra en el SII, verifique que sea el correcto de manera de recibir oportunamente estas indicaciones.</p>"
var waitdoMsg='<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Cargando...</span>';var dialogM="<div id='dialog' title='visualizar documento'> </div>";var barra_bootstrap="<p class='barra-opciones'><a class='pull-right hidden-xs' href='javascript:print();''>Imprimir</a></p>";var seeHead='<h3 >Mi Expediente Electrónico <a class="pull-right " href="javascript:printerC(\'contenido-mis-datos\')"><span class=" box_certificate"></span></a></h3>';var seeText="<p class='text-align'>Corresponde al repositorio del documentos que el SII dispone de usted, organizado en dos secciones, de las cuales a continuación se muestra un resumen.";seeText+="<strong>Mis Expedientes: </strong>Creados por el SII para acompañar procesos formales.   ";var seeCarpets="<p class='text-justify'><strong>Mis Carpetas:</strong> Organizadas por Temas de Interés, para aportar información voluntariamente.</p>";var auxAvisoRevisado=null;var auxAvisoRevisando=null;var auxAvisoRevisadoOpen=false;var auxAvisoRevisandoOpen=false;$(document).ready(function(){function misii_home(){waitingDialog.show();call_cntr();carga_inicial();waitingDialog.hide()}
misii_home();$('#menu_home').bind('click',function(){boxReorder();});$.extend({getUrlVars:function(){var vars=[],hash;var hashes=window.location.href.slice(window.location.href.indexOf('?')+1).split('&');for(var i=0;i<hashes.length;i++){hash=hashes[i].split('=');vars.push(hash[0]);vars[hash[0]]=hash[1];}
return vars;},getUrlVar:function(name){return $.getUrlVars()[name];}})
var allVars=$.getUrlVars();var byName=$.getUrlVar('name');$('#videoModal').on('hidden.bs.modal',function(){$(this).removeData('bs.modal');});$(document).on('hidden.bs.modal',function(e){if($(e.target).attr('data-refresh')=='true'){$(e.target).removeData('bs.modal');$(e.target).html('');}});autoPlayYouTubeModal();(function(a){a.createModal=function(b){defaults={title:"",message:"Your Message Goes Here!",closeButton:true,scrollable:false};var b=a.extend({},defaults,b);var c=(b.scrollable===true)?'style="max-height: 600px;overflow-y: auto;"':"";html='<div class="modal fade" id="myModal">';html+='<div class="modal-dialog">';html+='<div class="modal-content">';html+='<div class="modal-header">';html+='<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>';if(b.title.length>0){html+='<h2 class="modal-title">'+b.title+"</h2>"}
html+="</div>";html+='<div class="modal-body" '+c+">";html+=b.message;html+="</div>";html+='<div class="modal-footer">';if(b.closeButton===true){html+='<button type="button" class="btn btn-primary screen" data-dismiss="modal">Cerrar</button>'}
html+="</div>";html+="</div>";html+="</div>";html+="</div>";a("body").prepend(html);a("#myModal").modal().on("hidden.bs.modal",function(){a(this).remove()})}})(jQuery);(function(a){a.createModalEmergente=function(b){defaults={title:"",message:"Your Message Goes Here!",closeButton:true,scrollable:false};var b=a.extend({},defaults,b);var c=(b.scrollable===true)?'style="max-height: 600px;overflow-y: auto;"':"";html='<div class="modal fade" id="ModalEmergente">';html+='<div class="modal-dialog">';html+='<div class="modal-content">';html+='<div class="modal-header">';html+='<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>';if(b.title.length>0){html+='<h2 class="modal-title">'+b.title+"</h2>"}
html+="</div>";html+='<div class="modal-body" '+c+">";html+=b.message;html+="</div>";html+='<div class="modal-footer">';if(b.closeButton===true){html+='<button type="button" class="btn btn-primary" data-dismiss="modal">Cerrar</button>'}
html+="</div>";html+="</div>";html+="</div>";html+="</div>";a("body").prepend(html);a("#ModalEmergente").modal().on("hidden.bs.modal",function(){a(this).remove()})}})(jQuery);(function(a){a.createModalNotificaciones=function(b){defaults={title:"Notificaciones SII",message:"Your Message Goes Here!",closeButton:true,scrollable:false};var b=a.extend({},defaults,b);var c=(b.scrollable===true)?'style="max-height: 900px;overflow-y: auto;"':"";html='<div class="modal fade" id="NotificacionEmergente">';html+='<div class="modal-dialog">';html+='<div class="modal-content">';html+='<div class="modal-header">';html+='<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>';if(b.title.length>0){html+='<h2 class="modal-title">'+b.title+"</h2>"}
html+="</div>";html+='<div class="modal-body" '+c+">";html+=b.message;html+="</div>";html+='<div class="modal-footer">';if(b.closeButton===true){html+='<button type="button" class="btn btn-primary" data-dismiss="modal">Cerrar</button>'}
html+="</div>";html+="</div>";html+="</div>";html+="</div>";a("body").prepend(html);a("#NotificacionEmergente").modal().on("hidden.bs.modal",function(){a(this).remove()})}})(jQuery);$(function(){$('.view-pdf').on('click',function(){var pdf_link=$(this).attr('href');var trepoId=$(this).attr("data-repoId");var ropc=$(this).attr("data-tipoNot");var parametros="opc="+ropc+"&repoId="+trepoId+"&rnd="+Math.random();pdf_link=envio+parametros
var iframe='<object data="'+pdf_link+'" type="application/pdf"><embed src="'+pdf_link+'" type="application/pdf"  /></object>'
$.createModal({title:'My Title',message:iframe,closeButton:true,scrollable:false});return false;});})
var fireMidcl=false;$('#ramaDeclaraciones').click(function(){if(fireMidcl==false){$('#idmidecla').css({'color':'rgb(235, 81, 13)','font-weight':'bold','border-top':'2px solid rgb(235, 81, 13)'});fireMidcl=true;}else{$('#idmidecla').css({'color':'rgb(235, 81, 13)','font-weight':'','border-top':''});fireMidcl=false;}});var actions=[{name:'Mis datos tributarios',onClick:function(){javascript:call_option(112);}},{name:'Mis anotaciones tributarias',onClick:function(){javascript:call_option(8);}},{name:'Anuales F22',onClick:function(){javascript:call_option(13);}},{name:'Mensuales F29',onClick:function(){javascript:call_option(10);}},{name:'Mensuales F50',onClick:function(){javascript:call_option(11);}},{name:'Mis Bienes Raíces',onClick:function(){javascript:call_option(9);}},{name:'Mis Expedientes electronicos',onClick:function(){javascript:call_option(100);}},{name:'Visitas del SII',onClick:function(){javascript:call_option(14);}}];if(DatosCntrNow.contribuyente.autorizadoDeclararDia20==="S"){$("#accordionComu #comacc_8").show();}});function mySlider(){var cContainerSlider="slider";var strHtml="";var strBenevnuto="";try{strBenvenuto=muestraBienvenida();}catch(err){strBenvenuto="";}
if(strBenvenuto==""){strHtml="<a href='http://www.sii.cl/destacados/renta/2020/' target='_blank'><img src='/misii/img/slide2.png' class='img-responsive'/></a>";}else{strHtml=strBenvenuto;}
return strHtml;}
function showBienvenida(){var cContainerCntr="box_home";var strHtml="";strHtml+='<div class="icono_titulo_seccion wow fadeIn" data-wow-delay="300ms"></div>';strHtml+="<h1 class=\"title wow fadeIn\" data-wow-delay=\"400ms\">Inicio Mi SII</h1>";strHtml+="<h2 class=\"subtitle wow fadeIn\" data-wow-delay=\"500ms\">";strHtml+="              Accede fácil y cómodamente a tu información tributaria, donde además podrás realizar tus trámites en línea.</h2>";strHtml+="<div class=\"white_overlay\"></div>";strHtml+='<div id="slider" class="wow fadeIn" data-wow-delay="600ms" style="border:1px solid #ccc;">';strHtml+="	<div class=\"white_overlay\"></div>";strHtml+=mySlider();strHtml+='	</div>';strHtml+="            <div class=\"subtitle2 wow fadeIn\" data-wow-delay=\"700ms\">";strHtml+="            A continuación te damos acceso directo a trámites de tu interés.</div>";strHtml+="            <div id='contenidoObligaciones' class=\"wow fadeIn\" data-wow-delay=\"900ms\"></div>";strHtml+="            <div id=\"contenido_home\" class=\"grid\">";strHtml+="                    <div class=\"item wow fadeIn grid-item col-sm-12 col-lg-4\" data-wow-delay=\"1000ms\">";strHtml+="                        <div class=\"ic_lt_o\"><div class=\"ic_box1\"></div></div>";strHtml+="                        <span><b>Acceso Directo </b></span>";strHtml+="<ul>";if(inicioActiv=="N"||cntrDeclaraTG=="Sí"){strHtml+="                <li><a href='javascript:linkexterno(9)' >Pagar Contribuciones</a></li>";strHtml+="                <li><a href='javascript:linkexterno(10)' >Iniciar Actividades</a></li>";}
if(getTipoActividades(DatosActeco,2)==2){strHtml+="                        <li><a href='http://www.sii.cl/servicios_online/1040-1287.html#-collapseOne' target='_blank'>Emitir boleta de honorarios electrónica</a></li>";strHtml+="                        <li><a href='javascript:linkexterno(9)' >Pagar Contribuciones</a></li>";}
if(getTipoActividades(DatosActeco,1)==1){strHtml+="                        <li><a href='http://www.sii.cl/servicios_online/1039-3256.html' target='_blank'>Registro de Compras y Ventas</a></li>";strHtml+="                        <li><a href='javascript:linkexterno(11)' >Declarar IVA (F29)</a></li>";if(facturadorfpym==1){strHtml+="                        <li><a href='http://www.sii.cl/servicios_online/1039-1183.html#-collapseOne' target='_blank'>Emitir Factura electrónica y DTE</a></li>";}}
strHtml+="</ul>";strHtml+="                    </div>";strHtml+="                   <div class=\"item wow fadeIn grid-item col-sm-12 col-lg-4\" data-wow-delay=\"1200ms\">";strHtml+="                        <div class=\"ic_lt_o\"><div class=\"ic_box4\"></div></div>";if(nAnotaciones>0){strHtml+="                        <span><a href='#' id='comunica_LinkAnot' onclick='javascript:goAnotacion()'> <span class='taNota'>Anotaciones Vigentes</span> <span class='naNota'>("+nAnotaciones+")</span></a></span>";}else{strHtml+="                        <span><a href='#' id='comunica_LinkAnot' onclick='javascript:goAnotacion()'><span class='taNota'>Anotaciones Vigentes</span> <span class='naNota'>(0)</span></a></span>";}
strHtml+="                    </div>";strHtml+="                    <div class=\"item wow fadeIn grid-item col-sm-12 col-lg-4\" data-wow-delay=\"1100ms\">";strHtml+="                        <div class=\"ic_lt_o\"><div class=\"ic_box2\"></div></div>";if(nAlertasE>0){strHtml+="                        <span><a href='#' id='comunica_LinkAnot' onclick='javascript:goSituacion()'> <span class='taNota'>Mensajes Informativos</span> <span class='naNota'>("+nAlertasE+")</span></a></span>";}else{strHtml+="                        <span><a href='#' id='comunica_LinkAnot' onclick='javascript:goSituacion()'><span class='taNota'>Mensajes Informativos</span> <span id='nMensajesEmer' class='naNota'>(0)</span></a></span>";}
strHtml+="                   </div>";strHtml+="               <div class=\"clearfix\"></div>";strHtml+="              </div>";$("#"+cContainerCntr).empty()
$("#"+cContainerCntr).append(strHtml)
mySlider();boxReorder();}
function showComunicaciones(){var cContainerCntr="box_comunicados_sii";var strHtml="";strHtml+='<i class="icono_titulo fa fa-bullhorn"></i>';strHtml+="           <h1 class=\"title wow fadeIn\" data-wow-delay=\"700ms\">Comunicados del SII</h1>";strHtml+="           <h2 class=\"subtitle wow fadeIn\" data-wow-delay=\"800ms\">";strHtml+="              Aquí encontrarás las comunicaciones del SII tanto formales como informativas que este le ha enviado a usted.</h2>";strHtml+="            <div class=\"subtitle2 wow fadeIn\" data-wow-delay=\"800ms\">";strHtml+="                A continuación te invitamos a ver información de algunas de tus situaciones pendientes con el SII y te damos acceso directo a trámites de tu interés.</div>";strHtml+="            <div id=\"contenido\" class=\"grid\">";strHtml+="                   <div class=\"item wow fadeIn grid-item col-sm-6 col-md-4 col-lg-4\" data-wow-delay=\"1200ms\">";strHtml+="                       <i class=\"iconografia fa fa-list-alt\"></i>";strHtml+="                       <span><a href='javascript:call_option(201)' target='_self'>Mis Notificaciones Vigentes</a> </span>";strHtml+="                       <span>Notificaciones de Caracter formal que el SII le ha enviado</span>";strHtml+="                    </div>";strHtml+="                    <div class=\"item wow fadeIn grid-item col-sm-6 col-md-4 col-lg-4\" data-wow-delay=\"1300ms\">";strHtml+="                        <i class=\"iconografia fa fa-file\"></i>";strHtml+="                        <span><a href='javascript:call_option(200)' target='_self'>Mi Correspondencia</a> </span>";strHtml+="                        <span>Cartas Informativas que el SII le ha enviado</span>";strHtml+="                   </div>";strHtml+="               <div class=\"clearfix\"></div>";strHtml+="              </div>";$("#"+cContainerCntr).empty()
$("#"+cContainerCntr).append(strHtml)}
function objectFindByKey(array,key,value){try{for(var i=0;i<array.length;i++){if(array[i][key]===value){return array[i];}}}catch(e){return null;}
return null;}
function carga_inicial(){checkAut(null);call_alertas();call_anotaciones();showBienvenida();ventana_mensaje();try{leeObligaciones();}
catch(error){}
var clean_uri=location.protocol+"//"+location.host+location.pathname;}
function autoPlayYouTubeModal(){var trigger=$("body").find('[data-toggle="modal"]');trigger.click(function(){var ancho=1024;var alto=720;var dWidth=ancho-40;var dHeight=alto-40;var trepoId=$(this).attr("data-repoId");var ropc=$(this).attr("data-tipoNot");var parametros="opc="+ropc+"&repoId="+trepoId+"&rnd="+Math.random();var htmlContenido="";htmlContenido+='<object id="viewer" width="70%" height="90%">';htmlContenido+='<param name="wmode" value="transparent" />';htmlContenido+='<embed id="embeddedPlayer" src="'+envio+parametros+'" type="application/pdf" allowfullscreen="true" width="'+dWidth+'" height="'+dHeight+'" wmode="transparent">';htmlContenido+=waitdoMsg+'</embed></object>';$("#contenidoModal").html(htmlContenido);});}
replaceAll=function(string,omit,place,prevstring){if(prevstring&&string===prevstring)
return string;prevstring=string.replace(omit,place);return replaceAll(prevstring,omit,place,string)}
function formatoRut(texto){objRut=texto;var rut_aux="";for(i=0;i<texto.length;i++)
if(texto.charAt(i)!=' '&&texto.charAt(i)!='.'&&texto.charAt(i)!='-')
rut_aux=rut_aux+texto.charAt(i);largo=rut_aux.length;if(largo==0)
return false;if(largo<2){return false;}
for(i=0;i<largo;i++){var letra=rut_aux.charAt(i);if(!letra.match(/^([0-9]|[kK])$/)){return false;}}
var rut_inv="";for(i=(largo-1),j=0;i>=0;i--,j++){rut_inv=rut_inv+rut_aux.charAt(i);}
var dtexto="";dtexto=dtexto+rut_inv.charAt(0);dtexto=dtexto+'-';cnt=0;for(i=1,j=2;i<largo;i++,j++){if(cnt==3){dtexto=dtexto+'.';j++;dtexto=dtexto+rut_inv.charAt(i);cnt=1;}else{dtexto=dtexto+rut_inv.charAt(i);cnt++;}}
rut_inv="";for(i=(dtexto.length-1),j=0;i>=0;i--,j++){rut_inv=rut_inv+dtexto.charAt(i);}
var ret=rut_inv.toUpperCase();return ret;}
function convertDate(dateString){var p=dateString.split(/\D/g)
return[p[2],p[1],p[0]].join("-")}
function go2(opcion,cContainer,sLoader){var mthd="POST";var URLgo="";var qrstrng="";var tpRspns="html"
var cargBox="";if($("#"+cContainer).innerHTML==null){}
if(opcion==1){mthd="POST";URLgo="/misii/html/datatrib.html";tpRspns="json";qrstrng="";var opt=0;if(opt>0){down();return;}
params="OPT=1&VIEW=1";tpRspns="html";}
if(opcion==7){mthd="POST";URLgo="/cgi_misii/client001.cgi";tpRspns="html";qrstrng="";var opt=0;if(opt>0){down();return;}
params="OPT=7&VIEW=1";tpRspns="html";}
if(opcion==12){mthd="POST";URLgo="/cgi_misii/client001.cgi";tpRspns="html";qrstrng="";cargBox="midirectionAt";var opt=0;if(opt>0){down();return;}
params="OPT=12&VIEW=1";tpRspns="html";params="OPT=12&VIEW=1";}
if(opcion==19){mthd="POST";URLgo="/cgi_misii/CViewCarta.cgi";qrstrng="";cargBox="divAutRepresAt";if(represautDisplay==true)return;var opt=0;if(opt>0){down();return;}
tpRspns="JSON";params="year=&opc=19&VIEW=1";}
if(opcion==20){mthd="POST";URLgo="/cgi_misii/CViewCarta.cgi";qrstrng="";cargBox="miDocumentosAt";var opt=0;if(opt>0){down();return;}
tpRspns="JSON";params="year=&opc=20&VIEW=1";if(direccionesDisplay==true)return;}
if(opcion==21){mthd="POST";URLgo="/cgi_misii/CViewCarta.cgi";qrstrng="";cargBox="divAutRepresAt";if(girosDisplay==true)return;var opt=0;if(opt>0){down();return;}
tpRspns="JSON";params="year=&opc=21&VIEW=1";if(girosOutCache!=""){var ResponseDir=call_giros_out(girosOutCache);$("#"+cContainer).html(ResponseDir);return;};}
if(opcion==24||opcion==25||opcion==26){mthd="POST";URLgo="/cgi_misii/CViewCarta.cgi";qrstrng="";cargBox="divAutRepresAt";if(opcion==24&&ivaDecDisplay==true){return;}
if(opcion==25&&ivaJurDisplay==true){return;}
if(opcion==26&&rentaDecDisplay==true){return;}
var opt=0;if(opt>0){down();return;}
tpRspns="JSON";params="year=&opc="+opcion+"&VIEW=1";}
if(opcion==225){mthd="POST";URLgo="/cgi_misii/CViewCarta.cgi";qrstrng="";cargBox="midirectionAt";if(sociedadesDisplay==true)return;var opt=0;if(opt>0){down();return;}
tpRspns="JSON";params="year=&opc=31&VIEW=1";}
var id="9923";var direction="nones";$.ajax({type:'POST',url:URLgo+qrstrng,dataType:tpRspns,async:false,data:params,timeout:15000,cache:false,beforeSend:function(){waitingDialog.show();$("#"+cContainer).html("");},complete:function(){waitingDialog.hide();},success:function(response){var dataResponse=null;checkAut(response);dataResponse=show_display2Container(opcion,response);$("#"+sLoader).hide();$("#"+cContainer).html(dataResponse);if(opcion==21){if(response.numRegistros>0)
ShowGrid2Pages("#idGirosOut","Actividades");}
if(opcion==225){if(response.listParticipSocio.length>0)
ShowGrid2Pages("#idTableMiSoc","Sociedades");}}});}
function show_display2Container(opcion,response){if(opcion==20){dirOutCache=response;dataResponse=call_direccion_out(response)
direccionesCache=dataResponse;direccionesDisplay=true;}
if(opcion==21){girosOutCache=response;dataResponse=call_giros_out(response);girosDisplay=true;}
if(opcion==24){dirOutCache=response;dataResponse=panelDataF22s(response,1)
ivaDecDisplay=true;}
if(opcion==25){dirOutCache=response;dataResponse=FuncPintaDelaracionesIva(response,1);ivaJurDisplay=true;}
if(opcion==26){dirOutCache=response;dataResponse=FuncPintaDelaracionesIva(response,2);rentaDecDisplay=true;}
if(opcion==225){dataResponse=FuncRecuperaSocios(response)
sociedadesDisplay=true;}
if(opcion==19){dataResponse=FuncRecuperaRepresAut(response)
represautDisplay=true;}
if(opcion==7){dataResponse+=linksAtributosCntrb;}
if(opcion==20){setTimeout(function(){$('#dirOutTable').DataTable(paramGrilla);},1000);}
return dataResponse;}
function call_direccion_out(response){dirOutCache=response;var strHtml="";strHtml=" <h2> Direcciones no vigentes  </h2>";strHtml+="    <p> Corresponden a aquellos direcciones eliminadas dentro de los últimos 6 años. </p>";strHtml+="        <div id='no-more-tables'>";strHtml+="<table  class='dirNoVigente tablaInterna table-striped table-bordered table-hover cf' id='dirOutTable'>";strHtml+="<thead >";strHtml+="<tr><th class='text-center' style='vertical-align:middle'>Código Sucursal</th>";strHtml+="<th class='text-center' style='vertical-align:middle'>Tipo Dirección</th>";strHtml+="<th style='vertical-align:middle'>Dirección</th>";strHtml+="<th class='text-center' style='width:15%;vertical-align:middle'>Fecha Inicio</th>";strHtml+="</thead>";strHtml+="<tbody>";array=response.direccionesHistoricas;var strLinea="";if(array){if(response.direccionesHistoricas.length<=0){strLinea+='<td colspan="4" data-title="Conclusión">No registra información</td>';}else{array.sort(function(a,b){return a.codigo-b.codigo});strLinea="";for(var i=0;i<array.length;i++){var row=0;var strDireccion=array[i].calle+' '+((array[i].numero!=null)?("#"+array[i].numero):"")+' '+((array[i].villaPoblacion!=null)?array[i].villaPoblacion:"")+' '+((array[i].ciudad!=null)?("CIUDAD "+array[i].ciudad):"")+" "+((array[i].comunaDescripcion!=null)?("COMUNA "+array[i].comunaDescripcion):"")+" "+((array[i].regionDescripcion!=null)?(array[i].regionDescripcion):"")
strLinea+="<tr>";strLinea+="<td class='text-center' data-title='Código Sucursal'>"+array[i].codigo+"</td>";strLinea+="<td data-title='Tipo Dirección'>"+array[i].descripcion+"</td>";strLinea+="<td data-title='Dirección'>"+array[i].dir+"</td>";var auxDateSimple=array[i].histfechaevento;var fechaDirHisto="";if(auxDateSimple!=null){if(auxDateSimple.length>10){fechaDirHisto=auxDateSimple.substring(0,10);}}else{fechaDirHisto="-";}
strLinea+="<td class='text-center' data-title='Fecha Inicio'>"+fechaDirHisto+"</td>";strLinea+="</tr>";}}}
strHtml+=strLinea;strHtml+="</tbody>";strHtml+="</table>";strHtml+="        </div>";strHtml+="    </div>";strHtml+="</div></div>";return strHtml;}
function call_giros_out(response){girosOutCache=response;var strHtml="";var descActGirosOut="";strHtml="  <div id='tblIdGirosOut'>";strHtml+=" <h2><span class='do-print'>Actividades económicas eliminadas:</span></h2>       ";strHtml+=" <a class='print_icon pull-right hidden-print' href='javascript:printerC(\"tblIdGirosOut\")'>";strHtml+="    <span class='box_certificate'><div class='print_certificate'></div></span>";strHtml+=" </a>";strHtml+="<table class='tablaInterna table-striped table-bordered table-hover cf' id='idGirosOut'>";strHtml+="<thead >";strHtml+="<tr>";strHtml+="                    <th style='width:35%;vertical-align:middle'>Actividad</th>";strHtml+="                    <th class='text-center' style='width:10%;vertical-align:middle'>Código</th>";strHtml+="                    <th class='text-center' style='width:8%;vertical-align:middle'>Categoría tributaria</th>";strHtml+="                    <th class='text-center' style='width:10%;vertical-align:middle'>Afecta IVA</th>";strHtml+="                    <th class='text-center' style='width:21%;vertical-align:middle'>Fecha inicio</th>";strHtml+="                    <th class='text-center' style='width:21%;vertical-align:middle'>Fecha término</th>";strHtml+="</tr>";strHtml+="</thead>";strHtml+="<tbody>";array=response.listHistoricoGiros;var strLinea="";if(array==null){strLinea+='<tr><td  >No registra información</td><td/><td/><td/><td/><td/></tr>';}else{strLinea="";if(array.length>0){for(var i=0;i<array.length;i++){var row=0;strLinea+="<tr>";strLinea+="<td class='text-justify' data-title='Actividad'>"+array[i].tacnDesc+"</td>";strLinea+="<td class='text-center' data-title='Código'>"+array[i].tacnCodigo+"</td>";strLinea+="<td class='text-center' data-title='Categoría tributaria'>"+array[i].categoriaTributaria+"</td>";if(array[i].afectaIva=="S"){descActGirosOut="SI"}
if(array[i].afectaIva=="N"){descActGirosOut="NO"}
strLinea+="<td class='text-center' data-title='Afecta IVA'>"+descActGirosOut+"</td>";var auxDateSimple=array[i].fechaInicio;var fechaFIHisto="";if(auxDateSimple!=null){if(auxDateSimple.length>10){fechaFIHisto=auxDateSimple.substring(0,10);}}else{fechaFIHisto="-";}
strLinea+="<td class='text-center' data-title='A partir de'><span class='span_block'>"+fechaFIHisto+"</span></td>";auxDateSimple=array[i].fechaTermino;if(auxDateSimple!=null){if(auxDateSimple.length>10){fechaFIHisto=auxDateSimple.substring(0,10);}}else{fechaFIHisto="-";}
strLinea+="<td class='text-center' data-title='A partir de'><span class='span_block'>"+fechaFIHisto+"</span></td>";strLinea+="</tr>";}}else{strLinea+='<tr><td >No registra información</td><td/><td/><td/><td/><td/></tr>';}}
strHtml+=strLinea;strHtml+="</tbody>";strHtml+="</table>";strHtml+="        </div>";strHtml+="    </div>";strHtml+="</div></div>";return strHtml;}
function wait(ms){var start=new Date().getTime();var end=start;while(end<start+ms){end=new Date().getTime();}}
function call_cntr(){var mthd="POST";var URLgo="";var qrstrng="";var tpRspns="html"
var cargBox="";var response=DatosCntrNow;var dataResponse=response;var errorAut=null;errorAut=response.codigoError;if(errorAut=="-2"){alert("Error de autenticación");return;}
if(errorAut=="-3"){alert("No es posible recuperar información del contribuyente en este momento.  Reintente más tarde.");return;}
var cntrfull=dataResponse.contribuyente
if(cntrfull.codigoError==0){var nombreCntr="";var dircntrb="";var rutCntrNow="";nombreCntr+=((cntrfull.razonSocial!=null)?cntrfull.razonSocial+" ":"")
nombreCntr+=((cntrfull.nombres!=null)?cntrfull.nombres+" ":"")
nombreCntr+=((cntrfull.apellidoPaterno!=null)?cntrfull.apellidoPaterno+" ":"")
nombreCntr+=((cntrfull.apellidoMaterno!=null)?cntrfull.apellidoMaterno+" ":"")
rutCntrNow=cntrfull.rut+"-"+cntrfull.dv;document.getElementById("rutCntr").innerHTML=rutCntrNow;document.getElementById("rutCntrMovil").innerHTML=rutCntrNow;document.getElementById("nameCntrMovil").innerHTML=nombreCntr;document.getElementById("nameCntr").innerHTML=nombreCntr;document.getElementById("mailCntr").innerHTML=((cntrfull.eMail!=null)?cntrfull.eMail+" ":"No registra información")
if(document.getElementById("fonoCntr")){document.getElementById("fonoCntr").innerHTML=cntrfull.telefonoMovil;}
miRutMISII=cntrfull.rut+"-"+cntrfull.dv;emgrut=miRutMISII;if(cntrfull.razonSocial==null){minombreMisii=nombreCntr;}else{minombreMisii=cntrfull.razonSocial}
dircntrb=getDomicilio(dataResponse.direcciones);if(dircntrb==null||dircntrb=="")
dircntrb="No registra información";if(document.getElementById("domiCntr")){document.getElementById("domiCntr").innerHTML=((dircntrb!=null)?dircntrb:"No registra información");}
if(document.getElementById("ofitram")){document.getElementById("ofitram").innerHTML=panelDataOficinaText(cntrfull);}
personaMiSii=((cntrfull.personaMiSii!=null)?cntrfull.personaMiSii:"N");inicioActiv=((cntrfull.fechaInicioActividades!=null)?cntrfull.fechaInicioActividades:"N");cntrDeclaraTG=(cntrfull.declaraTG!=null?cntrfull.declaraTG:"");var fa_icon=$('#box_icon_user .icon_user');if(personaMiSii=="N"){fa_icon.addClass('ic_profile_building').removeClass('ic_profile_user');}
fa_icon.removeClass('hidden');$('#profile_user_link').removeClass('hidden');attrCache=dataResponse;displayAttrCntrRiac(attrCache)
displaySegmento(dataResponse);}else{}}
function getDomicilio(array){var strDireccion=null;if(array==null){strDireccion='';}else{strDireccion="";for(var i=0;i<array.length;i++){var row=0;if(array[i].tipoDomicilioCodigo=="1"){strDireccion=array[i].calle+' '+((array[i].numero!=null)?("#"+array[i].numero):"")+' '+((array[i].bloque!=null)?("Block #"+array[i].bloque):"")+' '+((array[i].departamento!=null)?("DEPTO. #"+array[i].departamento):"")+' '+((array[i].villaPoblacion!=null)?array[i].villaPoblacion:"")+" "+((array[i].comunaDescripcion!=null)?("COMUNA "+array[i].comunaDescripcion):"")+' '+((array[i].ciudad!=null)?("CIUDAD "+array[i].ciudad):"");};}}
return strDireccion;}
function toDateStr(stringDate){if(stringDate==null)return""
if(stringDate.trim()==""){return""}
var YYYY=stringDate.substring(0,4);var MM=stringDate.substring(5,7);var DD=stringDate.substring(8,10);var dt=DD+'-'+MM+'-'+YYYY;return dt;}
function redondearDecimales(num,decimales){var numero=parseFloat(num).toFixed(2);return numero;}
function panelDataDirecciones(array){var strHtml="";strHtml+="<div class='panel panel-default' id='ctracc_1' onclick=\"javascript:gotoDiv('ctracc_1')\">";strHtml+="<div class='corner_top'></div>";strHtml+="<div class='panel-heading' role='tab' id='headingOne'>";strHtml+="<h4 class='panel-title'>";strHtml+="<a role='button' data-toggle='collapse' data-parent='#accordionCntrb' href='#collapse1Cntrb'  class='arrow-click collapsed' aria-expanded='false' aria-controls='collapse1Cntrb'"
strHtml+="> <div class=\"box_arrow\"><div class=\"box_content_arrow\"><div class=\"ic_arrow\"></div></div></div>";strHtml+=" Direcciones </a>";strHtml+="</h4></div>";strHtml+="<div id='collapse1Cntrb' class='panel-collapse collapse' role='tabpanel' aria-labelledby='headingOne'>";strHtml+="    <div id='divdirection' class='panel-body'>";strHtml+="    <div class='panel-item' id='dirOutPrint'>";strHtml+="    <h2> <span>Direcciones vigentes</span>";strHtml+="    </h2>";strHtml+="    <a class='print_icon pull-right hidden-print' href='javascript:printerC(\"collapse1Cntrb\")'>";strHtml+="    <span class='box_certificate'><div class='print_certificate'></div></span>";strHtml+="    </a>                ";strHtml+="    <a type='button' class='btn btn-primary btn-sm screen hidden-print' href='javascript:linkexterno(8)'>Agregar/eliminar sucursales</a>";strHtml+="        <div id='no-more-tables'>";strHtml+="<table class='dirVigente tablaInterna table-striped table-bordered table-hover cf' id='direccionesVigentes'>";strHtml+="<thead >";strHtml+="<tr><th class='text-center' style='vertical-align:middle'>Código Sucursal</th>";strHtml+="<th class='text-center' style='vertical-align:middle'>Tipo Dirección</th>";strHtml+="<th style='vertical-align:middle'>Dirección</th>";strHtml+="<th class='text-center' style='width:17%;vertical-align:middle'>A partir de</th></tr>";strHtml+="</thead>";strHtml+="<tbody>";var strLinea="";if(array==null){strLinea+='<td  data-title="Conclusión">No registra información</td>';}else{array.sort(function(a,b){return a.codigo-b.codigo});strLinea="";for(var i=0;i<array.length;i++){var row=0;var strDireccion=array[i].calle+' '+((array[i].numero!=null)?("#"+array[i].numero):"")+' '+((array[i].bloque!=null)?("Block #"+array[i].bloque):"")+' '+((array[i].departamento!=null)?("DEPTO. #"+array[i].departamento):"")+' '+((array[i].villaPoblacion!=null)?array[i].villaPoblacion:"")+' '+((array[i].ciudad!=null)?("CIUDAD "+array[i].ciudad):"")+" "+((array[i].comunaDescripcion!=null)?("COMUNA "+array[i].comunaDescripcion):"")+" "+((array[i].regionDescripcion!=null)?(array[i].regionDescripcion):"")
strLinea+="<tr>";strLinea+="<td class='text-center' data-title='Código Sucursal'>"+array[i].codigo+"    </td>";strLinea+="<td data-title='Tipo Dirección'>"+array[i].tipoDomicilioDescripcion+"   </td>";strLinea+="<td data-title='Dirección'>"+strDireccion+"     </td>";strLinea+="<td data-title='A partir de'> <span style='display: block;min-width: 70px;text-align: center;' class='span_block'>"+((array[i].fechaModiRegistro!=null)?toDateStr(array[i].fechaModiRegistro):"")+"</span></td>";strLinea+="</tr>";if(array[i].tipoDomicilioCodigo=="1"){fonofijo=array[i].telefono;}}}
strHtml+=strLinea;strHtml+="</tbody>";strHtml+="</table>";strHtml+="        </div>";strHtml+="    </div>";strHtml+="    <div class='panel-item' id='dirout'> ";strHtml+="    </div>";strHtml+="</div></div>";strHtml+="</div>";return strHtml;}
function panelDataInicioActvidades(array){var strHtml="";strHtml+="<div class='panel panel-default' id='ctracc_3' onclick=\"javascript:gotoDiv('ctracc_3')\">";strHtml+="<div class='corner_top'></div>";strHtml+="<div class='panel-heading' role='tab' id='headingTwo'>";strHtml+="<h4 class='panel-title'>";strHtml+="<a data-toggle='collapse' data-parent='#accordionCntrb' href='#collapse2Cntrb' class='arrow-click collapsed' "
strHtml+="> <div class=\"box_arrow\"><div class=\"box_content_arrow\"><div class=\"ic_arrow\"></div></div></div>";strHtml+=" Inicio de actividades y término de giro    </a>";strHtml+="</h4></div>";strHtml+="<div id='collapse2Cntrb' class='panel-collapse collapse '  >";strHtml+="            <div class='panel-body'>";strHtml+="                <div id='no-more-tables' class='panel-item'>";strHtml+="<h2>";strHtml+="</h2>  ";strHtml+="<a class='print_icon pull-right hidden-print' href='javascript:printerC(\"collapse2Cntrb\")'>";strHtml+="    <span class='box_certificate'><div class='print_certificate'></div></span>";strHtml+="</a>";strHtml+="<table class='tablaInterna table-striped table-bordered table-hover cf'>";strHtml+="<thead>";strHtml+="<tr><th class='text-center'>Fecha constitución </th>";strHtml+="<th class='text-center'>Fecha Inicio de actividades<br/> <a href='http://www.sii.cl/servicios_online/1031-.html'>Rut e Inicio de actividades</a></th>";strHtml+="<th class='text-center'>Término de giro  <br/> <a href='http://www.sii.cl/servicios_online/1046-.html'>Declarar o consultar Término de giro</a></th>";strHtml+="</tr>";strHtml+="</thead>";strHtml+="<tbody>";var strLinea="";if(array==null){strLinea+='<tr><td  data-title="Conclusión" colspan="4" >No registra información</tr></td>';}else{strLinea="";var str=(array.declaraTG!=null?array.declaraTG:"-");var res=str.toUpperCase();strLinea+="<tr>";strLinea+="<td class='text-center' data-title='Fecha constitución'>"+(array.fechaConstitucion!=null?toDateStr(array.fechaConstitucion):"NO")+"</td>";strLinea+="<td class='text-center' data-title='Inicio actividades'>"+(array.fechaInicioActividades!=null?toDateStr(array.fechaInicioActividades):"NO")+"</td>";strLinea+="<td class='text-center' data-title='Término giro'>"+res+"</td>";strLinea+="</tr>";}
strHtml+=strLinea;strHtml+="</tbody>";strHtml+="</table>";strHtml+="        </div>";strHtml+="    </div>";strHtml+="</div></div>";return strHtml;}
function panelDataCorreos(array){var strHtml="";strHtml+="<div class='panel  panel-default'>";strHtml+="<div class='corner_top'></div>";strHtml+="<div class='panel-heading' role='tab' id='headingTwelve'>";strHtml+="<h4 class='panel-title'>";strHtml+="<a data-toggle='collapse' data-parent='#accordionCntrb' href='#collapse12Cntrb'  class='collapsed' "
strHtml+="> <div class=\"box_arrow\"><i class=\"fa fa-chevron-down pull-right\" aria-hidden=\"true\"></i></div>";strHtml+=" Correo de contacto y Correo para notificaciones. </a>";strHtml+="</h4></div>";strHtml+="<div id='collapse12Cntrb' class='panel-collapse collapse '  >";strHtml+="            <div class='panel-body'>";strHtml+="                <div id='no-more-tables' class='panel-item'>";strHtml+="<h2>    <a class='pull-right hidden-print' href='javascript:printerC(\"collapse12Cntrb\")'>";strHtml+="    <span class='box_certificate'><div class='print_certificate'></div></span>";strHtml+="    </a></h2>  ";strHtml+="<table class='tablaInterna table-striped table-bordered table-hover cf'>";strHtml+="<thead>";strHtml+="<tr><th class='text-center'>Correo Contacto </th>";strHtml+="<th class='text-center'>Correo Notificaciones </th>";strHtml+="</tr>";strHtml+="</thead>";strHtml+="<tbody>";var strLinea="";if(array==null){strLinea+='<tr><td  data-title="Conclusión" colspan="4" >No registra información</tr></td>';}else{strLinea="";strLinea+="<tr>";strLinea+="<td class='text-center' data-title='Correo Contacto'>"+(array.eMail!=null?array.eMail:"-")+"</td>";strLinea+="<td class='text-center' data-title='Correo Notificaciones'>"+(correoNoti!=null?correoNoti:"-")+"</td>";strLinea+="</tr>";}
strHtml+=strLinea;strHtml+="</tbody>";strHtml+="</table>";strHtml+="        </div>";strHtml+="    </div>";strHtml+="</div></div>";return strHtml;}
function panelDatafonos(array){var strHtml="";strHtml+="<div class='panel panel-default' id='ctracc_2' onclick=\"javascript:gotoDiv('ctracc_2')\">";strHtml+="<div class='corner_top'></div>";strHtml+="<div class='panel-heading' role='tab' id='headingOnce'>";strHtml+="<h4 class='panel-title'>";strHtml+="<a data-toggle='collapse' data-parent='#accordionCntrb' href='#collapse11Cntrb' class='arrow-click collapsed' >"
strHtml+=" <div class=\"box_arrow\"><div class=\"box_content_arrow\"><div class=\"ic_arrow\"></div></div></div>";strHtml+=" Teléfonos y Correos electrónicos  </a>";strHtml+="</h4></div>";strHtml+="<div id='collapse11Cntrb' class='panel-collapse collapse '  >";strHtml+="            <div class='panel-body'>";strHtml+="<table class='tablaInterna'>";strHtml+="<tbody>";var strLinea="";if(array==null){strLinea+='<tr><td  data-title="Conclusión" colspan="4" >No registra información</tr></td>';}else{strLinea="";strLinea+="<tr class='text-left'>";strLinea+="<td ><i class='fa '></i><b>Teléfono fijo</b> </td>";strLinea+="<td  >"+(fonofijo!=null?fonofijo:"No registra información")+"</td>";strLinea+="</tr><tr>";strLinea+="<td > <a href='javascript:linkexterno(3)' title='Modificar teléfono móvil.'><div class='box_edit'><div class='ic_edit'></div></div></a><b> Teléfono Móvil</b></td>";strLinea+="<td  >"+(array.telefonoMovil!=null?array.telefonoMovil:"No registra información")+"</td>";strLinea+="</tr><tr>";strLinea+="<td > <a href='javascript:linkexterno(3)' title='Modificar correo electrónico de contacto.'><div class='box_edit'><div class='ic_edit'></div></div></a><b>Correo electrónico de contacto</b></td>";strLinea+="<td  >"+(array.eMail!=null?array.eMail:"No registra información")+"</td>";strLinea+="</tr><tr>";strLinea+="<td > <a href='javascript:linkexterno(4)' title='Solicitar, actualizar o revocar correo para notificaciones.'><div class='box_edit'><div class='ic_edit'></div></div></a><b>Correo electrónico para notificaciones</b></td>";if(correoNoti=="")
correoNoti="No registra información";strLinea+="<td  >"+(correoNoti!=null?correoNoti:"No registra información")+"</td>";strLinea+="</tr>";}
strHtml+=strLinea;strHtml+="</tbody>";strHtml+="</table>";strHtml+="        </div>";strHtml+="</div></div>";return strHtml;}
function panelDataRepres(dataResponse){var arrayCntr=dataResponse.contribuyente;var array=dataResponse.representantes
var strHtml="";var strLineaNoVigente="";if(array==null){return"";}else{if(array[0].codigoError==1){return"";}}
strHtml+="<div class='panel panel-default' id='ctracc_4' onclick=\"javascript:gotoDiv('ctracc_4')\">";strHtml+="<div class='corner_top'></div>";strHtml+="<div class='panel-heading' role='tab' id='headingConsultas'>";strHtml+="<h4 class='panel-title'>";strHtml+="<a data-toggle='collapse' data-parent='#accordionCntrb' href='#collapse3Cntrb' class='arrow-click collapsed'> "
strHtml+=" <div class=\"box_arrow\"><div class=\"box_content_arrow\"><div class=\"ic_arrow\"></div></div></div>";strHtml+=" Representantes legales  </a>";strHtml+="</h4></div>";strHtml+="<div id='collapse3Cntrb' class='panel-collapse collapse'>";strHtml+="    <div id='divRepress' class='panel-body'>";strHtml+="    <div id='represVig'>";strHtml+="        <h2><span>Representantes legales vigentes</span> ";strHtml+="    									<a href=\"javascript:linkexterno(7)\"  title ='Actualizar datos de representantes'  > ";strHtml+="    									<div class=\"box_edit_hr\"><div class=\"ic_edit\"></div></div>";strHtml+="    								</a>";strHtml+="    </h2>   ";strHtml+="    <a class='print_icon pull-right hidden-print' href='javascript:printerC(\"represVig\")'>";strHtml+="    <span class='box_certificate'><div class='print_certificate'></div></span>";strHtml+="    </a>    ";strHtml+="            <table class='tablaInterna table-striped table-bordered table-hover cf'>";strHtml+="<tr>";if(arrayCntr.tipoActuacion=="Otra"){strHtml+="                    <th style='width:20%;vertical-align:middle'>Forma de actuación</th>";strHtml+="                    <td class='text-center' style='width:25%;vertical-align:middle'>"+arrayCntr.tipoActuacion+"</td>";strHtml+="                    <th class='text-center' style='width:10%;vertical-align:middle'>Descripción </th>";strHtml+="                    <td class='text-center' style='width:25%;vertical-align:middle'>"+((arrayCntr.descripcionActuacion!=null)?(arrayCntr.descripcionActuacion):"No registra información.")+" </td>";}else{strHtml+="                    <th style='width:30%;vertical-align:middle'>Forma de actuación</th>";strHtml+="                    <td class='text-center' style='width:70%;vertical-align:middle'>"+((arrayCntr.tipoActuacion!=null)?(arrayCntr.tipoActuacion):"No registra información.")+"</td>";}
strHtml+="</tr>";strHtml+="            </table>";strHtml+="        <div id='no-more-tables'>";strHtml+="            <table class='tablaInterna table-striped table-bordered table-hover cf'>";strHtml+="                <thead >";strHtml+="                    <tr><th class='text-center' style='vertical-align:middle'>Nombre</th>";strHtml+="                    <th class='text-center' style='vertical-align:middle'>Rut</th>";strHtml+="                    <th class='text-center' style='width:15%;vertical-align:middle'>A partir de</th></tr>";strHtml+="                </thead>";strHtml+="                <tbody>";var strLinea="";if(array==null){strLinea+='<tr><td colspan="3" data-title="Conclusión">No registra información</td></tr>';}else{strLinea="";strLineaNoVigente="";if(array[0].codigoError==0){for(var i=0;i<array.length;i++){var row=0;var strname=((array[i].nombres!=null)?(array[i].nombres):"")+' '+((array[i].apellidoPaterno!=null)?(array[i].apellidoPaterno):"")+" "+((array[i].apellidoMaterno!=null)?(array[i].apellidoMaterno):"")
if(array[i].vigente=="S"){strLinea+="<tr>";strLinea+="<td style='width:60%;' data-title='Nombre'>"+strname+" </td>";strLinea+="<td data-title='Rut' class='text-center'>"+array[i].rut+"-"+array[i].dv+" </td>";strLinea+="<td data-title='A partir de'><span style='display: block;min-width: 70px;text-align: center;' class='span_block'>"+((array[i].fechaInicio!=null)?toDateStr(array[i].fechaInicio):"")+"</span></td>";strLinea+="</tr>";}
if(array[i].vigente=="N"){strLineaNoVigente+="<tr>";strLineaNoVigente+="<td style='width:50%;' class='text-center' data-title='Nombre'>"+strname+" </td>";strLineaNoVigente+="<td data-title='Rut' class='text-center'>"+array[i].rut+"-"+array[i].dv+" </td>";strLineaNoVigente+="<td data-title='Fecha inicio' ><span class='span_block'>"+((array[i].fechaInicio!=null)?toDateStr(array[i].fechaInicio):"")+"</span></td>";strLineaNoVigente+="<td data-title='Fecha término'><span class='span_block'>"+((array[i].fechaTermino!=null)?toDateStr(array[i].fechaTermino):"")+"</span></td>";strLineaNoVigente+="</tr>";}}}
if(array[0].codigoError==1){strLinea+='<tr><td colspan="3" data-title="Conclusión">No registra información</td></tr>';}}
strHtml+=strLinea;strHtml+="        </tbody>";strHtml+="    </table>";strHtml+="</div>";strHtml+="</div>";strHtml+='<a href="#represOld" class="btn btn-info hidden-print" data-toggle="collapse">Representantes legales no vigentes <div class="box_arrow_down_lr"><div class="ic_arrow_down"></div></div></a>';strHtml+="      <div id='represOld' class='collapse'>  ";strHtml+="    <h2><span>Representantes legales no vigentes: </span>";strHtml+="    </h2>   ";strHtml+="    <a class='print_icon pull-right hidden-print' href='javascript:printerC(\"represOld\")'>";strHtml+="    <span class='box_certificate'><div class='print_certificate'></div></span>";strHtml+="    </a>    ";strHtml+="      <div id='no-more-tables'>";strHtml+="          <table class='tablaInterna table-striped table-bordered table-hover cf'>";strHtml+="              <thead >";strHtml+="                  <tr><th class='text-center' style='vertical-align:middle'>Nombre</th>";strHtml+="                  <th class='text-center' style='vertical-align:middle'>Rut</th>";strHtml+="                  <th class='text-center' style='width:15%;vertical-align:middle'>Fecha inicio</th>";strHtml+="                  <th class='text-center' style='width:15%;vertical-align:middle'>Fecha término</th></tr>";strHtml+="              </thead>";strHtml+="              <tbody>";if(strLineaNoVigente.trim()==""){strHtml+="<tr><td colspan='6' data-title='Para esta consulta:'>No registra información</td></tr>";}else{strHtml+=strLineaNoVigente;}
strHtml+="              </tbody>";strHtml+="          </table>";strHtml+="      </div>";strHtml+="    </div>";strHtml+="</div></div>";strHtml+="</div>";return strHtml;}
function roundToTwo(num){return+(Math.round(num+"e+2")+"e-2");}
function panelDataSocios(dataResponse){var array=dataResponse.socios;var arrayCntr=dataResponse.contribuyente;var strHtml="";var strLineaNoVigente="";var subtotalEnterado=0;var subtotalPorEnter=0;var porcUtilidades=0;var porcCapital=0;if(array==null){return"";}else{if(array[0].codigoError==1){return"";}}
strHtml+="<div class='panel panel-default' id='ctracc_5' onclick=\"javascript:gotoDiv('ctracc_5')\">";strHtml+="<div class='corner_top'></div>";strHtml+="<div class='panel-heading' role='tab' id='headingActualizacion'>";strHtml+="<h4 class='panel-title'>";strHtml+="<a data-toggle='collapse' data-parent='#accordionCntrb' href='#collapse4Cntrb' class='arrow-click collapsed'> "
strHtml+=" <div class=\"box_arrow\"><div class=\"box_content_arrow\"><div class=\"ic_arrow\"></div></div></div>";strHtml+="Socios y Capital</a>";strHtml+="</h4></div>";strHtml+="<div id='collapse4Cntrb' class='panel-collapse collapse'>";strHtml+="    <div id='divSocios' class='panel-body'>";strHtml+="    <div id='divSociosNew'>";strHtml+="    <h2><span>Socios vigentes</span>  <a  href='javascript:linkexterno(7)' title ='Actualizar datos de socios' class='hidden-print'><div class='box_edit_hr'><div class='ic_edit'></div></div></a>";strHtml+="    </h2>   ";strHtml+="    <a class='print_icon pull-right hidden-print' href='javascript:printerC(\"divSociosNew\")'>";strHtml+="    <span class='box_certificate'><div class='print_certificate'></div></span>";strHtml+="    </a>    ";strHtml+="        <div id='no-more-tables' >";strHtml+="            <table class='tablaInterna table-striped table-bordered table-hover cf'>";strHtml+="                <thead >";strHtml+="                    <tr><th style='vertical-align:middle'>Nombre</th>";strHtml+="                    <th class='text-center' style='width:15%;vertical-align:middle'>Rut</th>";strHtml+="                    <th class='text-center' style='vertical-align:middle'>Capital enterado$</th>";strHtml+="                    <th class='text-center' style='vertical-align:middle'>Capital por enterar $</th>";strHtml+="                    <th class='text-center' style='vertical-align:middle'>% Capital</th>";strHtml+="                    <th class='text-center' style='vertical-align:middle'>% Utilidades</th>";strHtml+="                    <th class='text-center' style='width:15%;vertical-align:middle'>Fecha de incorporación</th></tr>";strHtml+="                </thead>";strHtml+="                <tbody>";var strLinea="";if(array==null){strLinea+='<td  data-title="Conclusión">No registra información</td>';}else{strLinea="";strLineaNoVigente="";for(var i=0;i<array.length;i++){var row=0;var strname=((array[i].nombres!=null)?(array[i].nombres):"")+' '+((array[i].apellidoPaterno!=null)?(array[i].apellidoPaterno):"")+" "+((array[i].apellidoMaterno!=null)?(array[i].apellidoMaterno):"")
if(array[i].vigente=="S"){strLinea+="<tr>";strLinea+="<td data-title='Nombre'>"+strname+"</td>";strLinea+="<td class='text-center' data-title='Rut' >"+array[i].rut+"-"+array[i].dv+"</td>";strLinea+="<td class='text-center' data-title='Capital enterado' >   "+((array[i].aporteEnterado!=null)?number_format(array[i].aporteEnterado):"")+"</td>";strLinea+="<td class='text-center' data-title='Capital por Enterar' >"+((array[i].aportePorEnterar!=null)?number_format(array[i].aportePorEnterar):"")+"</td>";strLinea+="<td class='text-center' data-title='% Capital' >"+((array[i].participacionCapital!=null)?redondearDecimales(array[i].participacionCapital):"")+"</td>";strLinea+="<td class='text-center' data-title='% Utilidades' >"+((array[i].participacionUtilidades!=null)?redondearDecimales(array[i].participacionUtilidades):"")+"</td>";strLinea+="<td class='text-center' data-title='Fecha de Incorporacion' ><span style='display: block;min-width: 70px;text-align: center;' class='span_block'>"+((array[i].fechaIncorporacion!=null)?toDateStr(array[i].fechaIncorporacion):"")+"</span></td>";strLinea+="</tr>";subtotalEnterado+=parseInt(((array[i].aporteEnterado!=null)?array[i].aporteEnterado:"0"),10);subtotalPorEnter+=(0+parseInt(((array[i].aportePorEnterar!=null)?array[i].aportePorEnterar:"0"),10));porcUtilidades+=(0+parseFloat(((array[i].participacionCapital!=null)?array[i].participacionCapital:"0"),10));porcCapital+=(0+parseFloat(((array[i].participacionUtilidades!=null)?array[i].participacionUtilidades:"0"),10));}
if(array[i].vigente=="N"){strLineaNoVigente+="<tr>";strLineaNoVigente+="<td data-title='Nombre'>"+strname+"</td>";strLineaNoVigente+="<td data-title='Rut' class='text-center'>"+array[i].rut+"-"+array[i].dv+"</td>";strLineaNoVigente+="<td data-title='Capital enterado' >   "+((array[i].aporteEnterado!=null)?(array[i].aporteEnterado):"")+"</td>";strLineaNoVigente+="<td data-title='Capital por Enterar' >"+((array[i].aportePorEnterar!=null)?(array[i].aportePorEnterar):"")+"</td>";strLineaNoVigente+="<td data-title='% Capital' >"+((array[i].participacionCapital!=null)?(array[i].participacionCapital):"")+"</td>";strLineaNoVigente+="<td data-title='% Utilidades' >"+((array[i].participacionUtilidades!=null)?(array[i].participacionUtilidades):"")+"</td>";strLineaNoVigente+="<td data-title='Fecha de Incorporacion' ><span class='span_block'>"+((array[i].fechaIncorporacion!=null)?toDateStr(array[i].fechaIncorporacion):"")+"</span></td>";strLineaNoVigente+="<td data-title='Fecha de término' ><span class='span_block'>"+((array[i].fechaFinParticipacion!=null)?toDateStr(array[i].fechaFinParticipacion):"")+"</span></td>";strLineaNoVigente+="</tr>";}}}
if(strLinea.trim()==""){strHtml+="<tr><td colspan='7' data-title='Conclusión:'>No registra información  </td></tr>";}else{strHtml+=strLinea;strHtml+="<tr style='font-weight: bold;'>";strHtml+="<th colspan='2'> Sub-totales </th>";strHtml+="<th class='text-right' data-title='Sub total enterado' >"+number_format(subtotalEnterado)+"</th>";strHtml+="<th class='text-right' data-title='Sub total enterar' >"+number_format(subtotalPorEnter)+"</th>";strHtml+="<th class='text-center' data-title='% Utilidades' >"+roundToTwo(porcUtilidades)+"</th>";strHtml+="<th class='text-center' data-title='% Capital' >"+porcCapital+"</th>";strHtml+="<th></th>";strHtml+="</tr>";strHtml+="  <tr><th colspan='2'>Capital Total informado $</th><th  class='text-center' colspan='2' data-title='Total' >";strHtml+="  <span id='myspan'></span>"+number_format(subtotalEnterado+subtotalPorEnter)+"</th><td colspan='3'  style:'border:0;'></td>";strHtml+="  </tr></tbody></table>";}
strHtml+="        </tbody>";strHtml+="    </table>";strHtml+="</div>";strHtml+="</div>";strHtml+='<a href="#divSociosOld" class="btn btn-info hidden-print" data-toggle="collapse">Socios no vigentes <i class="fa fa-chevron-down" ></i></a>';strHtml+="      <div id='divSociosOld' class='collapse'>";strHtml+="    <h2><span>Socios no vigentes: </span> ";strHtml+="    </h2> ";strHtml+="    <a class='print_icon pull-right hidden-print' href='javascript:printerC(\"divSociosOld\")'>";strHtml+="    <span class='box_certificate'><div class='print_certificate'></div></span>";strHtml+="    </a>";strHtml+="          <table class='tablaInterna table-striped table-bordered table-hover cf'>";strHtml+="              <thead>";strHtml+="                  <tr><th style='vertical-align:middle'>Nombre</th>";strHtml+="                  <th class='text-center' style='vertical-align:middle'>Rut</th>";strHtml+="                  <th class='text-center' style='vertical-align:middle'>Capital enterado $</th>";strHtml+="                  <th class='text-center' style='vertical-align:middle'>Capital por enterar $</th>";strHtml+="                  <th class='text-center' style='vertical-align:middle'>% Capital</th>";strHtml+="                  <th class='text-center' style='vertical-align:middle'>% Utilidades</th>";strHtml+="                  <th class='text-center' style='width:15%;vertical-align:middle'>Fecha de incorporación</th>";strHtml+="                  <th class='text-center' style='width:15%;vertical-align:middle'>Fecha de termino</th></tr>";strHtml+="              </thead>";strHtml+="              <tbody>";strHtml+=((strLineaNoVigente!="")?(strLineaNoVigente):"<tr><td colspan='8' data-title='Conclusión'>No registra información</td></tr>");strHtml+="              </tbody>";strHtml+="          </table>";strHtml+="      </div>";strHtml+="    </div>";strHtml+="</div></div>";return strHtml;}
function getTipoActividades(dataResponse,categoria){var retorno=0;if(dataResponse==null){retorno=0;}else{var array=dataResponse;if(array==null){retorno=0;}else{for(var i=0;i<array.length;i++){var row=0;if(array[i].codigoError=="1"&&array.length==1){retorno=-1;}else{if(array[i].categoriaTributaria==categoria){retorno=categoria;break;}}}}}
return retorno;}
function panelDataActividades(dataResponse){var array=dataResponse.actEcos;var arrayCntr=dataResponse.contribuyente;var strHtml="";var strLineaNoVigente="";var descActGirosOut="";strHtml+="<div class='panel panel-default' id='ctracc_6' onclick=\"javascript:gotoDiv('ctracc_6')\">";strHtml+="<div class='corner_top'></div>";strHtml+="<div class='panel-heading' role='tab' id='headingP10'>";strHtml+="<h4 class='panel-title'>";strHtml+="<a data-toggle='collapse' data-parent='#accordionCntrb' href='#collapse6Cntrb' class='arrow-click collapsed' "
strHtml+=" onclick=\"javascript:go2(21, 'girosout', 'miDocumentosAt')\"";strHtml+="> <div class=\"box_arrow\"><div class=\"box_content_arrow\"><div class=\"ic_arrow\"></div></div></div>";strHtml+=" Actividades económicas </a>";strHtml+="</h4></div>";strHtml+="<div id='collapse6Cntrb' class='panel-collapse collapse'>";strHtml+="    <div id='divActEcos' class='panel-body'>";strHtml+="    <h2>Actividades económicas vigentes <a href='javascript:linkexterno(6);'><div class='box_edit_hr'><div class='ic_edit'></div></div></a>";strHtml+="    </h2>";strHtml+="    <a class='print_icon pull-right hidden-print' href='javascript:printerC(\"divActEcos\")'>";strHtml+="    <span class='box_certificate'><div class='print_certificate'></div></span>";strHtml+="    </a>";strHtml+="    <table class='tablaInterna table-striped table-bordered table-hover cf'>";strHtml+="    <thead>";strHtml+="    <tr><th>Glosa descriptiva de actividades económicas</th><td  colspan='3' class='text-justify'>";strHtml+="    "+((arrayCntr.glosaActividad!=null)?arrayCntr.glosaActividad:"No Registra")+"</td>";strHtml+="    </tr></thead></table>";strHtml+="        <div id='no-more-tables' >";strHtml+="            <table class='tablaInterna table-striped table-bordered table-hover cf' id='tblIdGiros'>";strHtml+="                <thead ><tr>";strHtml+="                    <th style='vertical-align:middle'>Actividad</th>";strHtml+="                    <th class='text-center' style='vertical-align:middle'>Código</th>";strHtml+="                    <th class='text-center' style='vertical-align:middle'>Categoría tributaria</th>";strHtml+="                    <th class='text-center' style='vertical-align:middle'>Afecta IVA</th>";strHtml+="                    <th class='text-center' style='width:12%;vertical-align:middle'>A partir de</th>";strHtml+="                </tr></thead>";strHtml+="                <tbody>";var strLinea="";if(array==null){strLinea+='<td >No registra información</td><td/><td/><td/><td/>';}else{strLinea="";strLineaNoVigente="";for(var i=0;i<array.length;i++){var row=0;strLinea+="<tr>";if(array[i].codigoError=="1"&&array.length==1){strLinea+="<td>No registra información</td><td/><td/><td/><td/>"}else{strLinea+="<td data-title='Actividad'>"+((array[i].descripcion!=null)?array[i].descripcion:"")+"</td>";strLinea+="<td class='text-center' data-title='Código' >"+((array[i].codigo!=null)?array[i].codigo:"")+"</td>";strLinea+="<td class='text-center' data-title='Categoría tributaria' >   "+((array[i].categoriaTributaria!=null)?array[i].categoriaTributaria:"-")+"</td>";if(array[i].afectoIva=="S"){descActGirosOut="SI"}
if(array[i].afectoIva=="N"){descActGirosOut="NO"}
strLinea+="<td class='text-center' data-title='Afecta IVA' >"+((descActGirosOut!="")?descActGirosOut:"")+"</td>";strLinea+="<td class='text-center' data-title='A partir de' ><span style='display: block;min-width: 70px;text-align: center;' class='span_block'>"+((array[i].fechaInicio!=null)?array[i].fechaInicio:"")+"</span></td>";strLinea+="</tr>";}}}
strHtml+=strLinea;strHtml+="        </tbody>";strHtml+="    </table>";strHtml+="</div>";strHtml+='<a href="#girosout" class="btn btn-info hidden-print " style="display:none;" data-toggle="collapse">Actividades económicas eliminadas <i class="fa fa-chevron-down" ></i></a>';strHtml+="</div>";strHtml+="    <div class='panel-body collapse'  id='girosout' > ";strHtml+="        </div>";strHtml+="</div></div>";return strHtml;}
function panelDataRepresAut(){var strHtml="";strHtml+="<div class='panel panel-default' id='ctracc_8' onclick=\"javascript:gotoDiv('ctracc_8')\">";strHtml+="<div class='corner_top'></div>";strHtml+="<div class='panel-heading' role='tab' id='headingSesion'>";strHtml+="<h4 class='panel-title'>";strHtml+="<a data-toggle='collapse' data-parent='#accordionCntrb' href='#collapse5Cntrb' class='arrow-click collapsed' "
strHtml+=" onclick=\"javascript:go2(19, 'divAutRepres', 'divAutRepresAt')\"";strHtml+="> <div class=\"box_arrow\"><div class=\"box_content_arrow\"><div class=\"ic_arrow\"></div></div></div>";strHtml+=" Usuarios Electronicos Autorizados </a>";strHtml+="</h4></div>";strHtml+="    <div id='collapse5Cntrb' class='panel-collapse collapse' aria-expanded='true' style=''>";strHtml+="        <div id='divAutRepres' class='panel-body'>";strHtml+="        </div>";strHtml+='<div id="divAutRepresAt" class="text-center" style="display: none; vertical-align:middle">';strHtml+='<img src="/misii/img/ajax-loader.gif" alt="Imagen Cargando">';strHtml+='<strong> Cargando...</strong></div>';strHtml+="</div></div>";return strHtml;}
function panelDataSociedasdes(){var strHtml="";strHtml+="<div class='panel panel-default' id='ctracc_7' onclick=\"javascript:gotoDiv('ctracc_7')\">";strHtml+="<div class='corner_top'></div>";strHtml+="<div class='panel-heading' role='tab' id='headingP11'>";strHtml+="<h4 class='panel-title' card-header180'>";strHtml+="<a data-toggle='collapse' data-parent='#accordionCntrb' href='#collapse7Cntrb' class='arrow-click collapsed' "
strHtml+=" onclick=\"javascript:go2(225, 'divMissocies', 'divMissociesAt')\"";strHtml+="> <div class=\"box_arrow\"><div class=\"box_content_arrow\"><div class=\"ic_arrow\"></div></div></div>";strHtml+=" Sociedades a las que pertenece el contribuyente</a>";strHtml+="</h4></div>";strHtml+="    <div id='collapse7Cntrb' class='panel-collapse collapse' aria-expanded='true' style=''>";strHtml+="        <div id='divMissocies' class='panel-body'>";strHtml+="        </div>";strHtml+='<div id="divMissociesAt" class="text-center" style="display: none; vertical-align:middle">';strHtml+='<img src="/misii/img/ajax-loader.gif" alt="Imagen Cargando">';strHtml+='<strong> Cargando...</strong></div>';strHtml+="</div></div>";return strHtml;}
function panelUltimosDocumentos(){var strHtml="";strHtml+="<div class='panel panel-custom-nivel1'>";strHtml+="    <div class='panel-heading'>";strHtml+="        <h2 class='panel-title  card-header180'>";strHtml+="        <a  class='collapsed' data-toggle='collapse' data-parent='#accordionData' href='#collapse8Cntrb' ";strHtml+="        onclick=\"javascript:go2(7, 'divdocumentos', 'miDocumentosAt')\"";strHtml+="        ><i class='fa fa-chevron-up pull-right'/>Documentos autorizados </a>";strHtml+="    <a class='pull-right hidden-print' href='javascript:printerC(\"collapse8\")'>";strHtml+="    <span class='box_certificate'><div class='print_certificate'></div></span>";strHtml+="    </a>    ";strHtml+="    </h2></div>";strHtml+="    <div id='collapse8Cntrb' class='panel-collapse collapse' aria-expanded='true' style=''>";strHtml+="        <h2 class='panel-title'>";strHtml+="            <a type='button' class='btn btn-primary btn-sm hidden-print' href='https://zeusr.sii.cl/cgi_AUT2000/admRPTEBuild.cgi'>Actualizar</a>";strHtml+="        </h2>"
strHtml+="        <div id='divdocumentos' class='panel-body'>";strHtml+="        </div>";strHtml+='<div id="miCarDocumentos" class="text-center" style="display: none; vertical-align:middle">';strHtml+='<img src="/misii/img/ajax-loader.gif" alt="Imagen Cargando">';strHtml+='<strong> Cargando...</strong></div>';strHtml+="</div></div>";return strHtml;}
function panelUltimosDocumentosR(array){var strHtml="";strHtml+="<div class='panel panel-default' id='ctracc_11' onclick=\"javascript:gotoDiv('ctracc_11')\">";strHtml+="<div class='corner_top'></div>";strHtml+="<div class='panel-heading' role='tab' id='headingP12'>";strHtml+="<h4 class='panel-title'>";strHtml+="<a data-toggle='collapse' data-parent='#accordionCntrb' href='#collapse10Cntrb' class='arrow-click collapsed'> "
strHtml+=" <div class=\"box_arrow\"><div class=\"box_content_arrow\"><div class=\"ic_arrow\"></div></div></div>";strHtml+=" Documentos tributarios autorizados  </a>";strHtml+="</h4></div>";strHtml+="<div id='collapse10Cntrb' class='panel-collapse collapse'>";strHtml+="    <div id='divActEcos' class='panel-body'>";strHtml+="        <div id='no-more-tables' >";strHtml+="            <table class='tablaInterna table-striped table-bordered table-hover cf' id='tblUltimosDoc'>";strHtml+="                <thead ><tr>";strHtml+="                    <th class='text-center' style='vertical-align:middle'>Tipo</th>";strHtml+="                    <th class='text-center' style='vertical-align:middle'>Autorizado hasta el Nº</th>";strHtml+="                    <th class='text-center' style='vertical-align:middle'>Fecha Autorización</th>";strHtml+="                </tr></thead>";strHtml+="                <tbody>";var strLinea="";if(array==null){strLinea+='<td  data-title="Conclusión">No registra información</td><td/><td/>';}else{strLinea="";for(var i=0;i<array.length;i++){var row=0;if(array[i].codigoError==0){strLinea+="<tr>";strLinea+="<td data-title='Actividad'>"+array[i].descripcion+"</td>";strLinea+="<td class='text-center' data-title='Código' >"+((array[i].numeroFinal!=null)?(array[i].numeroFinal):"")+"</td>";strLinea+="<td class='text-center' data-title='A partir de' >"+((array[i].fechaLegalizacion!=null)?(array[i].fechaLegalizacion):"")+"</td>";strLinea+="</tr>";}else{strLinea+="<tr>";strLinea+="<td >"+array[i].descripcionError+"</td><td/><td/>";strLinea+="</tr>";}}}
strHtml+=strLinea;strHtml+="        </tbody>";strHtml+="    </table>";dataDet=attrCache.atributos;strHtml+="    </div>";strHtml+="</div></div>";strHtml+="</div>";return strHtml;}
function panelBBRR(array){var strHtml="";strHtml+="<div class='panel panel-default' id='ctracc_10' onclick=\"javascript:gotoDiv('ctracc_10')\">";strHtml+="<div class='corner_top'></div>";strHtml+="<div class='panel-heading' role='tab' id='headingP14'>";strHtml+="<h4 class='panel-title'>";strHtml+="<a data-toggle='collapse' data-parent='#accordionCntrb' href='#collapse14Cntrb' onClick='javascript:callMessageBBRR()' class='arrow-click collapsed'> "
strHtml+=" <div class=\"box_arrow\"><div class=\"box_content_arrow\"><div class=\"ic_arrow\"></div></div></div>";strHtml+=" Bienes Raíces  </a>";strHtml+="</h4></div>";strHtml+="<div id='collapse14Cntrb' class='panel-collapse collapse'>";strHtml+="    <div id='divPropiedades' class='panel-body'>";strHtml+="        <div id='no-more-tables' >";strHtml+='</div>';strHtml+="</div>";strHtml+="</div>";strHtml+="    </div>";return strHtml;}
function panelAtributos(array){var strHtml="";strHtml+="<div class='panel panel-default' id='ctracc_9' onclick=\"javascript:gotoDiv('ctracc_9')\">";strHtml+="<div class='corner_top'></div>";strHtml+="<div class='panel-heading' role='tab' id='headingP13'>";strHtml+="<h4 class='panel-title'>";strHtml+="<a data-toggle='collapse' data-parent='#accordionCntrb' href='#collapse13Cntrb' class='arrow-click collapsed'> "
strHtml+=" <div class=\"box_arrow\"><div class=\"box_content_arrow\"><div class=\"ic_arrow\"></div></div></div>";strHtml+=" Características del contribuyente </a>";strHtml+="</h4></div>";strHtml+="<div id='collapse13Cntrb' class='panel-collapse collapse'>";strHtml+="    <div id='divActEcos' class='panel-body'>";strHtml+="    <h2>Características";strHtml+="    </h2>";strHtml+="    <a class='print_icon pull-right hidden-print' href='javascript:printerC(\"collapse13Cntrb\")'>";strHtml+="    <span class='box_certificate'><div class='print_certificate'></div></span>";strHtml+="    </a>";strHtml+="        <div id='no-more-tables' >";strHtml+="            <table class='tablaInterna table-striped table-bordered table-hover cf'>";strHtml+="                <thead ><tr>";strHtml+="                    <th class='text-center' style='vertical-align:middle'>Descripción</th>";strHtml+="                    <th class='text-center' style='vertical-align:middle'>A partir de</th>";strHtml+="                </tr></thead>";strHtml+="                <tbody>";dataDet=array.atributos;var strLinea="";if(dataDet!=null){if(dataDet.length==0){strLinea+='<td >No registra información</td><td/>';}else{strLinea="";for(var i=0;i<dataDet.length;i++){var row=0;if(dataDet[i].atrCodigo!="CPYM"&&dataDet[i].atrCodigo!="NOTI"){strLinea+="<tr>";strLinea+="<td data-title='Actividad'>"+dataDet[i].descAtrCodigo+"</td>";strLinea+="<td class='text-center' data-title='A partir de' >"+((dataDet[i].fechaInicio!=null)?(dataDet[i].fechaInicio):"-")+"</td>";strLinea+="</tr>";}}}}else{strLinea+='<td >No registra información</td><td/>';}
strHtml+=strLinea;strHtml+="        </tbody>";strHtml+="    </table>";strHtml+='</ul></div>';strHtml+="</div>";strHtml+="</div>";strHtml+="    </div>";return strHtml;}
function panelDataOficina(array){var dirGC="";dirGColspan=1;if(array.unidadOperativaGcCodigo!=null){dirGC="<br/><br/>DIRECCION DE "+array.unidadOperativaGcDescripcion;dirGC+="<br/>"+array.unidadOperativaGcDireccion;dirGC+="<br/><br/>Ud. pertenece a la nómina de Grandes Contribuyentes (G.C.), a continuación  <a href='http://www.sii.cl/ayudas/asistencia/3048-3050.html'>Vea detalle de trámites</a> a realizar en cada oficina. ";dirGColspan=2;}
var strHtml="";strHtml+="<div class='panel panel-default' id='ctracc_12' onclick=\"javascript:gotoDiv('ctracc_12')\">";strHtml+="<div class='corner_top'></div>";strHtml+="<div class='panel-heading' role='tab' id='headingP13'>";strHtml+="<h4 class='panel-title'>";strHtml+="<a data-toggle='collapse' data-parent='#accordionCntrb' href='#collapse9Cntrb' class='arrow-click collapsed'> "
strHtml+=" <div class=\"box_arrow\"><div class=\"box_content_arrow\"><div class=\"ic_arrow\"></div></div></div>";strHtml+=" Oficina del SII para trámites presenciales   </a>";strHtml+="</h4></div>";strHtml+="    <div id='collapse9Cntrb' class='panel-collapse collapse' aria-expanded='true' style=''>";strHtml+="            <div class='panel-body'>";strHtml+="                <div >";strHtml+="<table class='tablaInterna table-striped table-bordered table-hover cf'>";strHtml+="<thead colspan='"+dirGColspan+"'>";var direccionOficina="OFICINA: "+((array.unidadOperativaDescripcion!=null)?(array.unidadOperativaDescripcion):"No registra información")+"<br/>"+((array.unidadOperativaDireccion!=null)?(array.unidadOperativaDireccion):" ");strHtml+="<tr><th class='text-center' style='width:33%;vertical-align:middle'>Oficina para trámites presenciales</th>";strHtml+="<td class='text-justify' >"+direccionOficina+dirGC;strHtml+="</td></tr>";strHtml+="</thead>";strHtml+="<tbody>";strHtml+="</tbody>";strHtml+="</table>";strHtml+="        </div>";strHtml+="    </div>";strHtml+="</div></div>";return strHtml;}
function panelDataOficinaText(array){var dirGC="";dirGColspan=1;if(array.unidadOperativaGcCodigo!=null){dirGC=" <br/>DIRECCION DE "+array.unidadOperativaGcDescripcion;dirGC+="<br/> "+array.unidadOperativaGcDireccion;dirGC+="<br/>Ud. pertenece a la nómina de Grandes Contribuyentes, a continuación  <a href='http://siic01.sii.cl:100/SIIC/index.html'>Vea detalle de trámites</a> a realizar en cada oficina. ";dirGColspan=2;}
var strHtml="";var direccionOficina="OFICINA: "+((array.unidadOperativaDescripcion!=null)?(array.unidadOperativaDescripcion):"No registra información")+" "+((array.unidadOperativaDireccion!=null)?(array.unidadOperativaDireccion):" ")
strHtml+="<p>"+direccionOficina+"<br/> "+dirGC;strHtml+="</p>";return strHtml;}
function pinta_accordion_Vacio(id,tituloPanel,callerOption,divDestino,divLoading){var str="";str+="<div class='panel panel-custom-nivel1'>";str+="    <div class='panel-heading'>";str+="        <h2 class='panel-title card-header180'>";str+="        <a class='collapsed' data-toggle='collapse' data-parent='#accordionData' href='#collapse"+id+"' ";str+="        onclick=\"javascript:go2("+callerOption+", '"+divDestino+"', '"+divLoading+"')\"";str+="        ><i class='fa fa-chevron-up pull-right'/>"+tituloPanel+"</a>";str+="    </h2></div>";str+="    <div id='collapse"+id+"' class='panel-collapse collapse' aria-expanded='true' style=''>";str+="        <div id='"+divDestino+"' class='panel-body'>";str+="        </div>";str+="<div id='"+divLoading+"' class='text-center' style='display: none; vertical-align:middle'>";str+='<img src="/misii/img/ajax-loader.gif" alt="Imagen Cargando">';str+='<strong> Cargando...</strong></div>';str+="</div></div>";return str;}
function pinta_accordion_url(id,tituloPanel,url,urlDesc,divDestino){var str="";str+="<div class='panel panel-custom-nivel1'>";str+="    <div class='panel-heading'>";str+="        <h2 class='panel-title card-header180'>";str+="        <a class='collapsed' data-toggle='collapse' data-parent='#accordionData' href='#collapse"+id+"' ";str+="        ><i class='fa fa-chevron-up pull-right'/>"+tituloPanel+"</a>";str+="    </h2></div>";str+="    <div id='collapse"+id+"' class='panel-collapse collapse' aria-expanded='true' style=''>";str+="        <div id='"+divDestino+"' class='panel-body'>";str+="<a  class='btn btn-warning btn-lg font-weight-bold' role='button' href='"+url+"'>"+urlDesc+"</a>";str+="        </div>";str+="</div></div>";return str;}
function ShowGrid2Pages(tableNameId,type_data){$(tableNameId).DataTable({"language":{"sProcessing":"Procesando...","sLengthMenu":"Mostrar _MENU_"+type_data,"sZeroRecords":"No se encontraron resultados","sEmptyTable":"Ningún dato disponible en esta tabla","sInfo":"Mostrando  del _START_ al _END_ de un total de _TOTAL_ registros","sInfoEmpty":"Mostrando  del 0 al 0 de un total de 0 registros","sInfoFiltered":"(filtrado de un total de _MAX_ registros)","sInfoPostFix":"","sSearch":"Buscar:","sUrl":"","sInfoThousands":",","sLoadingRecords":"Cargando...","oPaginate":{"sFirst":"Primero","sLast":"Último","sNext":"Siguiente","sPrevious":"Anterior"},"oAria":{"sSortAscending":": Activar para ordenar la columna de manera ascendente","sSortDescending":": Activar para ordenar la columna de manera descendente"}},rowReorder:{selector:'td:nth-child(1)'},responsive:true});}
function call_datos_trib(){var cContainerCntr="contenido-mis-datos";var str="";str="<h2>Mis datos tributarios</h2> ";str+="<div id='accordionData' class='panel-group '>";str+=pinta_accordion_Vacio(1,"USUARIOS ELECTRÓNICOS",19,'divAutRepres','divAutRepresAt');str+=pinta_accordion_Vacio(3,"SOCIEDADES",225,'divMissocies','divMissociesAt');str+="</div>";$("#"+cContainerCntr).empty()
$("#"+cContainerCntr).append(str)}
function call_anot_trib(){var cContainerCntr="contenido-mis-datos";var str="";str="<h2>Estado de Mis declaraciones:</h2> ";str+="<div id='accordionData' class='panel-group '>";str+=pinta_accordion_Vacio(1,"Declaraciones de Impuesto de IVA",25,'divAutRepres','divAutRepresAt');str+=pinta_accordion_Vacio(2,"Juradas de Iva",26,'divJur','divJurAt');str+=pinta_accordion_Vacio(3,"Declaraciones de Impuesto Renta",24,'divAutRenta','divAutRentat');str+=pinta_accordion_url(4,"Juradas de Renta",'https://emin.sii.cl/djconsultarentaui/internet/#/',"Ir a Consulta de estado Declaraciones Juradas",'divAutRentaUrl');str+="</div>";str+='<table style="width: auto;  float: right;">';str+='<tr><td colspab="2">Nota: </td></tr>';str+='<tr><td>- :</td><td> No tiene declaraciones para el periodo.</td></tr>';str+='<tr><td>N°:</td><td> Indica cantidad de declaraciones enviadas. </td></tr>';str+='</table>';$("#"+cContainerCntr).empty()
$("#"+cContainerCntr).append(str)}
function call_anotaciones(){var mthd="POST";var URLgo="";var qrstrng="";var tpRspns="html"
var cargBox="";var strHtml="";var cContainerCntr="divAnotaciones";URLgo="/cgi_misii/CViewCarta.cgi";tpRspns="json";params="opc=28";$.ajax({type:'POST',url:URLgo+qrstrng,dataType:tpRspns,async:false,data:params,timeout:15000,cache:false,beforeSend:function(){},success:function(response){var dataResponse=response;strHtml=setDisplayAnotaciones(dataResponse);$("#"+cContainerCntr).empty()
$("#"+cContainerCntr).append(strHtml)
ShowGrid2Pages("#idtblAnotacionesCntr","Anotaciones");}});}
function call_cntr_full(){var mthd="POST";var URLgo="";var qrstrng="";var tpRspns="html"
var cargBox="";var strHtml="";if(ctrFullData!=null){setDisplayZero(ctrFullData);}else{URLgo="/cgi_misii/CViewCarta.cgi";tpRspns="json";params="opc=112";$.ajax({type:'POST',url:URLgo+qrstrng,dataType:tpRspns,async:false,data:params,timeout:15000,cache:false,beforeSend:function(){},success:function(response){var dataResponse=response;setDisplayZero(dataResponse);}});}
call_mainact();}
function call_alertas(){alertasCache=DatosCntrAler;}
function setDisplayAnotaciones(response){var strHtml="";var strLinea="";if(response.codigo==0){dataDet=response.objSalida;if(dataDet.length==0){strLinea+='<td >No registra información</td><td/><td/><td/><td/>';}else{strHtml+="    <p><h2><a class='print_icon pull-right' href='javascript:printerC(\"divAnotaciones\")' ><span class='box_certificate'><div class='print_certificate'></div></span>	</a></h2></p><br/>	<br/>";strHtml+="    <div>A continuación, se muestran tus Anotaciones vigentes, que te imponen restricciones en algún trámite de tu ciclo de vida como contribuyente o en la obtención de algún beneficio.<br/><br/>		";strHtml+="    <div  class='panel-item' >";strHtml+="    </div></div>	";strHtml+="    <div id='divAnotaci' class='panel-item'>";strHtml+="        <div id='no-more-tables' >";strHtml+="            <table class='tablaInterna table-striped table-bordered table-hover cf' id='idtblAnotacionesCntr'>";strHtml+="                <thead ><tr>";strHtml+="                    <th class='text-center' style='vertical-align:middle;width: 80px;'>Anotación</th>";strHtml+="                    <th class='text-center' style='vertical-align:middle;width: 80px;'>Cantidad </th>";strHtml+="                    <th class='text-center' style='vertical-align:middle; width: 75px;'>Fecha de activación</th>";strHtml+="                    <th class='text-center' style='vertical-align:middle'>Descripción y efectos</th>";strHtml+="                    <th class='text-center' style='vertical-align:middle'>Acción Requerida</th>";strHtml+="                </tr></thead>";strHtml+="                <tbody>";nAnotaciones=0;strLinea="";for(var i=0;i<dataDet.length;i++){var row=0;strLinea+="<tr>";strLinea+="<td data-title='Actividad'>"+dataDet[i].taltCodigo+"</td>";strLinea+="<td class='text-center' data-title='Cantidad Anotaciones' >"+((dataDet[i].cantTaltCodigo!=null)?(dataDet[i].cantTaltCodigo):"-")+"</td>";strLinea+="<td data-title='Fecha Ult.'> <span class='span_block'>"+dataDet[i].fechaActivacion+"</span></td>";strLinea+="<td class='text-justify' data-title='Descripción' >"+((dataDet[i].glosaSubstr!=null)?(dataDet[i].glosaSubstr):"-")+"</td>";strLinea+="<td class='text-justify' data-title='Acción' >"+((dataDet[i].accionStr!=null)?(dataDet[i].accionStr):"-")+"</td>";strLinea+="</tr>";nAnotaciones+=((dataDet[i].cantTaltCodigo!=null)?(dataDet[i].cantTaltCodigo):0);}
strHtml+=strLinea;strLinea="";strHtml+="        </tbody>";strHtml+="    </table>";strHtml+="</div>";strHtml+="</div>";strHtml+="    </div>";strHtml+="</div></div>";strHtml+="<br/><p>";strHtml+="<strong>Notas:</strong><br/>";strHtml+="<strong>Anotación: </strong> Corresponde a una marca que registra el Servicio de Impuestos Internos (SII), producto de alguna situación particular de incumplimiento tributario, comportamiento, acción u omisión. Esta se identifica con un código.<br/><br/>";strHtml+="<strong>Cantidad:</strong> Corresponde a la cantidad de veces que se ha registrado una anotación.<br/><br/>";strHtml+="<strong>Fecha de activación: </strong>Corresponde a la fecha en que se practicó la anotación. Cuando la cantidad de una anotación es mayor a 1, la fecha asociada, corresponde a la de la última anotación activada de ese tipo. <br/>";strHtml+=" </p>";}}else{strLinea+='<td >No registra información</td><td/><td/><td/><td/>';}
strHtml+=strLinea;return strHtml;}
function setDisplayZero(response){var cContainerCntr="box_datos_contribuyente";var dataResponse=response;if(response.codigoError==0){call_option(982);strHtml="<div class='icono_titulo_seccion'></div>";strHtml+="        <h1 class='title'>";strHtml+="Datos personales y tributarios</h1>";strHtml+="<h2 class='subtitle'>               </h2>";strHtml+="</div></h2> ";strHtml+="<div id='contenido'>";strHtml+="<div class='panel-group acordeon' id='accordionCntrb' role='tablist' aria-multiselectable='true'>";strHtml+=panelDataDirecciones(dataResponse.direcciones);strHtml+="\n";strHtml+=panelDatafonos(dataResponse.contribuyente);strHtml+="\n";strHtml+=panelDataInicioActvidades(dataResponse.contribuyente);if(personaMiSii=="N"){strHtml+="\n";strHtml+=panelDataRepres(dataResponse);strHtml+="\n";strHtml+=panelDataSocios(dataResponse);strHtml+="\n";}
strHtml+=panelDataActividades(dataResponse);strHtml+="\n";strHtml+=panelDataSociedasdes();strHtml+="\n";strHtml+=panelAtributos(attrCache);strHtml+="\n";strHtml+=panelUltimosDocumentosR(dataResponse.timbrajes);strHtml+="\n";strHtml+=panelBBRR();strHtml+="\n";strHtml+=panelDataOficina(dataResponse.contribuyente);strHtml+="\n";strHtml+="</div>";strHtml+="</div>";}else{strHtml=" <h2> No se pudo completar petición</h2>";strHtml+="<p>No se pudo recuperar la información solicitada, reintente más tarde.</p>"}
$("#"+cContainerCntr).empty()
$("#"+cContainerCntr).append(strHtml)
ShowGrid2Pages("#tblUltimosDoc","Documentos");ShowGrid2Pages("#direccionesVigentes","direcciones");ShowGrid2Pages("#tblIdGiros","actividades");}
function call_option(opcion){var params="";var tipoResp="html";var laOpcion=0;if(opcion==200){$("#item1").collapse('hide');params="opc=200&VIEW=1";laOpcion=200;tipoResp="json";}
if(opcion==201){$("#item1").collapse('hide');params="opc=201&VIEW=1";laOpcion=201;tipoResp="json";}
if(opcion==1){$("#item1").collapse('hide');var obj=document.getElementById('2332');var opt=0;if(obj)
opt=obj.innerHTML.indexOf('suspension')
if(opt>0){down();return;}
params="OPT=1&VIEW=1";tipoResp="html";}
if(opcion==111){$("#item1").collapse('hide');var obj=document.getElementById('2332');var opt=0;if(obj)
opt=obj.innerHTML.indexOf('suspension')
if(opt>0){down();return;}
params="OPT=1&VIEW=3";tipoResp="html";}
if(opcion==2){$("#item1").collapse('hide');var obj=document.getElementById('2331');var opt=0;if(obj)
opt=obj.innerHTML.indexOf('suspension')
if(opt>0){down();return;}
params="OPT=1&VIEW=2";tipoResp="html";}
if(opcion==17){$("#item1").collapse('hide');tipoResp="html"
params="OPT=17&VIEW=1";}
if(opcion==7){var obj=document.getElementById('2343');var opt=0;if(obj)
opt=obj.innerHTML.indexOf('suspension')
if(opt>0){down();return;}
$("#item1").collapse('hide');tipoResp="html";params="OPT=7&VIEW=1";}
if(opcion==8){var obj=document.getElementById('2335');var opt=0;if(obj)
opt=obj.innerHTML.indexOf('suspension')
if(opt>0){down();return;}
callSituacionTrib();return;}
if(opcion==9){var opt=0;var obj=document.getElementById('2344');if(obj){opt=document.getElementById('2344').innerHTML.indexOf('suspension')
if(opt>0){down();return;}}
$("#item1").collapse('hide');tipoResp="html";params="OPT=9&VIEW=1";}
if(opcion==12){var opt=0;opt=document.getElementById('2334').innerHTML.indexOf('suspension')
if(opt>0){down();return;}
$("#item1").collapse('hide');params="OPT=12&VIEW=1";}
if(opcion==13){var obj=document.getElementById('2337');var opt=0;if(obj){opt=obj.innerHTML.indexOf('suspension')
if(opt>0){down();return;}}
params="OPT=13&FORM=22&VIEW=1&PERIODO=0"+yearMisii;}
if(opcion==10){var obj=document.getElementById('2334');var opt=0;if(obj){var opt=0;opt=document.getElementById('2344').innerHTML.indexOf('suspension')
if(opt>0){down();return;}}
params="OPT=10&VIEW=1&FORM=29&PERIODO=0"+yearMisii;}
if(opcion==11){var obj=document.getElementById('2339');var opt=0;if(obj){var opt=0;opt=document.getElementById('2339').innerHTML.indexOf('suspension')
if(opt>0){down();return;}}
params="OPT=11&VIEW=1&FORM=50&PERIODO=0"+yearMisii;}
if(opcion==14){var obj=document.getElementById('2339');var opt=0;if(obj){var opt=0;opt=document.getElementById('2339').innerHTML.indexOf('suspension')
if(opt>0){down();return;}}
laOpcion=14;tipoResp="json";params="year="+yearMisii+"&opc=14";}
if(opcion==17){$("#item1").collapse('hide');params="OPT=17&VIEW=1";}
if(opcion==18){var opt=0;opt=document.getElementById('2341').innerHTML.indexOf('suspension')
if(opt>0){down();return;}
tipoResp="html"
params="OPT=18&VIEW=1&PERIODO=0"+yearMisii;if(year_choose==0)year_choose=2011;}
if(opcion==19){var opt=0;opt=document.getElementById('2340').innerHTML.indexOf('suspension')
if(opt>0){down();return;}
tipoResp="html";params="OPT=19&VIEW=1&TIPO=1&FORM=3600&PERIODO=0"+yearMisii;}
if(opcion==20){var opt=0;opt=document.getElementById('2342').innerHTML.indexOf('suspension')
if(opt>0){down();return;}
params="OPT=20&VIEW=1&TIPO=2&FORM=3600&PERIODO=0"+yearMisii;}
if(opcion==21){var opt=0;opt=document.getElementById('2345').innerHTML.indexOf('suspension')
if(opt>0){down();return;}
laOpcion=21;tipoResp="json";params="OPT=21&VIEW=1&PERIODO=0"+yearMisii;}
if(opcion==16){var opt=0;var obj1=document.getElementById('2345');if(obj1){opt=obj1.innerHTML.indexOf('suspension')
if(opt>0){down();return;}}
laOpcion=16;tipoResp="json";params="OPT=16&VIEW=1&PERIODO=0"+yearMisii;}
if(opcion==25){var obj23=document.getElementById('2336');var opt=0;if(obj23){opt=document.getElementById('2336').innerHTML.indexOf('suspension')
if(opt>0){down();return;}}
$("#item1").collapse('hide');laOpcion=25;tipoResp="json";params="opc=4&OPT=25&VIEW=1&MODE=1&PERIODO=0"+yearMisii;}
if(opcion==26){var obj23=document.getElementById('2336');var opt=0;if(obj23){opt=document.getElementById('2336').innerHTML.indexOf('suspension')
if(opt>0){down();return;}}
$("#item1").collapse('hide');laOpcion=26;tipoResp="json";params="opc=4&OPT=26&VIEW=1&MODE=1&PERIODO=0"+yearMisii;}
if(opcion==38){var obj23=document.getElementById('2336');var opt=0;if(obj23){opt=document.getElementById('2336').innerHTML.indexOf('suspension')
if(opt>0){down();return;}}
ivaDecDisplay=false;ivaJurDisplay=false;rentaDecDisplay=false;call_anot_trib();return;}
if(opcion==333){var obj23=document.getElementById('2336');var opt=0;if(obj23){opt=document.getElementById('2336').innerHTML.indexOf('suspension')
if(opt>0){down();return;}}
call_datos_trib();return;}
if(opcion==96){var opt=0;var obj1=document.getElementById('2346');if(obj1){opt=obj1.innerHTML.indexOf('suspension')
if(opt>0){down();return;}}
$("#item1").collapse('hide');laOpcion=96;tipoResp="json";params="opc=4&OPT=96&VIEW=1&MODE=1&PERIODO=0"+yearMisii;}
if(opcion==100){var opt=0;var obj234=document.getElementById('2348');if(obj234){opt=obj234.innerHTML.indexOf('suspension')
if(opt>0){down();return;}}
$("#item1").collapse('hide');laOpcion=100;tipoResp="json";params="year=0&opc=10&OPT=100&VIEW=1&page=1&MODE=1";}
if(opcion==3){var opt=0;opt=document.getElementById('2347').innerHTML.indexOf('suspension')
if(opt>0){down();return;}
msgemergente();return;}
if(opcion==31){callMessage();return;}
if(opcion==97){$("#item1").collapse('hide');laOpcion=97;tipoResp="json";params="opc=13&VIEW=1"}
if(opcion==112){direccionesDisplay=false;represautDisplay=false;girosDisplay=false;sociedadesDisplay=false;call_cntr_full();return;}
if(opcion==98){$("#item1").collapse('hide');var obj=document.getElementById('2333')
var opt=0;if(obj)
opt=obj.innerHTML.indexOf('suspension');if(opt>0){down();return;}
laOpcion=98;tipoResp="json";params="opc=12&VIEW=1"}
if(opcion==982){$("#item1").collapse('hide');var obj=document.getElementById('2333')
var opt=0;if(obj)
opt=obj.innerHTML.indexOf('suspension');if(opt>0){down();return;}
laOpcion=982;tipoResp="json";params="opc=12&VIEW=1"}
if(opcion==24){$("#item1").collapse('hide');var obj=document.getElementById('2333')
var opt=0;if(obj)
opt=obj.innerHTML.indexOf('suspension');if(opt>0){down();return;}
laOpcion=24;tipoResp="json";params="opc=24&VIEW=1"}
if("HTML"==tipoResp.toUpperCase()){callajax(params);}
if("JSON"==tipoResp.toUpperCase()){callajaxJson(params,laOpcion);}}
function callajax(params){params=params+"&rnd="+Math.random();process(cgiajax,params,"html",procesarRespuesta,callback_error,container,carga);}
function callajaxInterno(params){params=params+"&rnd="+Math.random();process(cgiajax,params,"html",procesarRespuestaInterna,callback_error,"subcontenido","subinterno");}
function callajaxInternoByContent(params,content){params=params+"&rnd="+Math.random();process(cgiajax,params,"html",procesarRespuestaInterna,callback_error,"subcontenido","subinterno");}
function calculaDV(rut){var suma=0;var mul=2;var i=0;for(i=rut.length-1;i>=0;i--){suma=suma+rut.charAt(i)*mul;mul=mul==7?2:mul+1;}
var dvr=''+(11-suma%11);if(dvr=='10')
dvr='K';else if(dvr=='11')
dvr='0';return dvr;}
function FuncRecuperaRepresAut(data){var novigentes="";var cabeceraTable="";var str="     <h2 >";str+="            Representantes Electrónicos";str+="            <a type='button' class='btn btn-primary btn-sm hidden-print' href='https://zeusr.sii.cl/cgi_AUT2000/admRPTEBuild.cgi'>Actualizar</a>";str+="    <a class='pull-right hidden-print' href='javascript:printerC(\"collapse5\")'>";str+="    <span class='box_certificate'><div class='print_certificate'></div></span>";str+="    </a>    ";str+="        </h2>"
str+="<p>A continuación se presenta el listado de  contribuyentes a quienes Ud. ha autorizado como  representantes electrónicos para distintos impuestos o trámites.</p>";cabeceraTable+='<div id="no-more-tables">';cabeceraTable+='<table class="tablaInterna  table-striped table-bordered table-hover">';cabeceraTable+='<thead >';cabeceraTable+='<tr>';cabeceraTable+='<th class="text-center" style="width:12%;vertical-align:middle">Rut</th>';cabeceraTable+='<th class="text-center" style="width:50%;vertical-align:middle">Nombre</th>';cabeceraTable+='<th class="text-center" style="width:35%;vertical-align:middle">Impuesto que permite representar</th>';cabeceraTable+='</tr>    '
cabeceraTable+='</thead>'
cabeceraTable+='<tbody>';str+=cabeceraTable;if(data.estado==0){var array=data.representantesTo;if(array==null){str+='<tr><td colspan="3" data-title="Conclusión">No registra información</td></tr>';}else{for(var i=0;i<array.length;i++){var strLinea="";var row=0;var RepreseAUTApp=array[i].codigoAppl+' '+array[i].descripcionAppl;var sfrmrut=formatoRut(array[i].rut+'-'+calculaDV(array[i].rut));strLinea+='<tr><td class="text-center"  data-title="Rut">'+sfrmrut+'</td>';strLinea+='<td class="text-left" data-title="Nombre"  >'+array[i].nameRpdo+'</td>';strLinea+='<td class="text-justify" data-title="Impuesto" >'+RepreseAUTApp+'</td></tr>';row++;str+=strLinea;}
if(array.length==0){str+="<tr><td colspan='8'>No registra información</td></tr>"}}}else if(data.estado=="-2"){location.reload();}else if(data.estado=="0"||data.estado=="-1"){str+='<td colspan="8"  data-title="Conclusión">No registra información</td>';}
str+='</tbody>'
str+='</table>';str+='</div>';str+=""
return str;}
function FuncRecuperaSocios(data){var novigentes="";var cabeceraTable="";var str="";var SociedesEstadoOut="";str+="<h2>";str+="</h2>";str+="<a class='print_icon pull-right hidden-print' href='javascript:printerC(\"tablemissoc\")'>";str+="    <span class='box_certificate'><div class='print_certificate'></div></span>";str+="</a>";str+=dialogM;cabeceraTable+='<div  id="tablemissoc">';cabeceraTable+=represText;cabeceraTable+='<table class="tablaInterna table-striped table-bordered table-hover cf" id="idTableMiSoc">';cabeceraTable+='<thead >';cabeceraTable+='<tr>';cabeceraTable+='<th style="width:35%;vertical-align:middle">Nombre Sociedad o entes</th>';cabeceraTable+='<th class="text-center" style="width:14%;vertical-align:middle">Rut</th>';cabeceraTable+='<th class="text-center" style="width: 4%;vertical-align:middle">Termino de Giro</th>';cabeceraTable+='<th class="text-center" style="width: 6%;vertical-align:middle">Capital enterado $</th>';cabeceraTable+='<th class="text-center" style="width: 6%;vertical-align:middle">Capital por enterar $</th>';cabeceraTable+='<th class="text-center" style="width: 6%;vertical-align:middle">Fecha por enterar</th>';cabeceraTable+='<th class="text-center" style="width: 6%;vertical-align:middle">% Capital</th>';cabeceraTable+='<th class="text-center" style="width: 6%;vertical-align:middle">% participación  utilidades</th>';cabeceraTable+='<th class="text-center" style="width:11%;vertical-align:middle">Fecha de Incorpación</th>';cabeceraTable+='</tr>    '
cabeceraTable+='</thead>'
cabeceraTable+='<tbody>';str+=cabeceraTable;if(data.listParticipSocio.length>0){var array=data.listParticipSocio;if(array==null){str+='<td >No registra información</td><td/><td/><td/><td/><td/><td/><td/><td/>';}else{for(var i=0;i<array.length;i++){var strLinea="";var row=0;var nombreEmp=array[i].nombres+' '+array[i].apellidoPaterno+' '+array[i].apellidoMaterno+' '+array[i].razonSocial;anotherString=replaceAll(nombreEmp,"+"," ")
strLinea+="<tr>";strLinea+='<td class="text-left"  data-title="Nombre Sociedad" style="word-break:break-all;" > '+anotherString+' </td>';var srut=formatoRut(array[i].rutSociedad+"-"+array[i].dvSociedad);strLinea+='<td class="text-center" data-title="Rut">'+srut+'</td>';if(array[i].estado=="S"){SociedesEstadoOut="NO";}
if(array[i].estado=="N"){SociedesEstadoOut="SI";}
strLinea+='<td class="text-center" data-title="Termino de Giro">'+SociedesEstadoOut+'</td>';strLinea+='<td class="text-right" data-title="Capital enterado $">'+number_format(array[i].aporteEnterado)+'</td>';strLinea+='<td class="text-right" data-title="Capital enterar $">'+number_format(array[i].aportePorEnterar)+'</td>';strLinea+='<td class="text-right" data-title="Fecha enterar $"><span class="span_block">'+array[i].fechaPorEnterar+'</span></td>';strLinea+='<td class="text-right" data-title="% Capital">'+((array[i].participacionCapital!="")?redondearDecimales(array[i].participacionCapital):"")+'</td>';strLinea+='<td class="text-right" data-title="% utilidades">  '+((array[i].participacionUtilidades!="")?redondearDecimales(array[i].participacionUtilidades):"")+'</td>';((array[i].participacionUtilidades!=null)?redondearDecimales(array[i].participacionUtilidades):"")
if(array[i].fechaIncorpacion==null){strLinea+='<td data-title="Incorporación">-</td>';}else{var sdatecap=convertDate(array[i].fechaIncorpacion);strLinea+='<td class="text-center"  data-title="Incorporación"><span class="span_block">'+sdatecap+'</span></td>';}
strLinea+="</tr>";row++;str+=strLinea;}
if(array.length==0){str+='<td >No registra información</td><td/><td/><td/><td/><td/><td/><td/><td/>';}}}else if(data.codigoResp=="-2"){location.reload();}else if(data.listParticipSocio.length=="0"){str+='<td >No registra información</td><td/><td/><td/><td/><td/><td/><td/><td/>';}
str+='</tbody>'
str+='</table>';str+='</div>';return str;}
function letraIva(letra){var respLetra="";switch(letra.charAt(0)){case"E":respLetra="E: En Espera Cierre Cortina.";break;case"O":respLetra="O: No Observada.";break;case"S":respLetra="S: Observada Secundaria.";break;case"I":respLetra="I: Impugnada.";break;case"J":respLetra="J: Justificada.";break;case"N":respLetra="N: No Procesada.";break;case"V":respLetra="V: Impugnada Diferencia Menor.";break;case"W":respLetra="W: Internet.";break;case"Y":respLetra="Y: Re-Impugnado por Cruce.";break;case"P":respLetra="P: Procesada.";break;case"H":respLetra="Declaraciones ingresadas por el fiscalizador.";break;default:respLetra="";}
var nnn=letra.indexOf("*");if(nnn>0){respLetra+=" Tiene más de una declaración vigente en el periodo.";}
return respLetra;}
function FuncPintaDelaracionesIva(data,opcionElegida){var novigentes="";var cabeceraTable="";var str="";var strColumNames="<td class='text-center'>Formulario</td>";var llenadoNamesCabecera=false;str+=represText;str+=dialogM;cabeceraTable+='<div id="no-more-tables">';cabeceraTable+='<table class="tablaInterna  table-bordered table-hover cf">';cabeceraTable+='<tbody>';str+=cabeceraTable;if(data.codigoError==0){var array=data.registros;if(array==null){str+='<td  colspan=\'9\' data-title="Conclusión">No registra información</td>';}else{for(var i=0;i<array.length;i++){var strLinea="";var row=0;strLinea+="<tr data-toggle='collapse' data-target='#accordion"+opcionElegida+""+i+"' class='clickable' style='cursor: pointer;'>";strLinea+='<th class="text-left" >  <span class="glyphicon glyphicon-chevron-right"></span>  '+array[i].formulario+''+array[i].descripcionFormulario+' </th>';var titulos=array[i].resumenDeclaracion;if(titulos){for(var i2=0;i2<titulos.length;i2++){strLinea+='<th class="text-center">'+titulos[i2]+'</th>';}}else{strLinea+='<th class="text-center" colspan="7">No existe detalle para este dato</th>';}
strLinea+="</tr>";var detalleMensual=array[i].detalleMensual;strLinea+="<tbody id='accordion"+opcionElegida+""+i+"' class='collapse'>";for(var i3=0;i3<detalleMensual.length;i3++){strLinea+="<tr >";strLinea+='<td class="text-left" >'+detalleMensual[i3].fila+' </td>';var detalleAnual=detalleMensual[i3].detalleAnual;for(var i4=0;i4<detalleAnual.length;i4++){if(llenadoNamesCabecera==false){strColumNames+='<td class="text-center">'+detalleAnual[i4].columna+'</td>';}
if(detalleAnual[i4].letra=="-"){strLinea+='<td class="text-center">'+detalleAnual[i4].letra+'</td>';}else{strLinea+='<td class="text-center"><a href="'+detalleAnual[i4].datosDeclaracion.link+'"  data-toggle="tooltip" title="'+letraIva(detalleAnual[i4].letra)+'">'+detalleAnual[i4].letra+'</a></td>';}}
if(llenadoNamesCabecera==false){str+=strColumNames;llenadoNamesCabecera=true;}
strLinea+="</tr>";}
strLinea+="</tbody>";row++;str+=strLinea;}
if(array.length==0){str+="<tr><td colspan='9'>No registra información</td></tr>"}}}else if(data.codigoResp=="-2"){location.reload();}else if(data.numRegistros=="0"){str+='<td colspan="8"  data-title="Conclusión">No registra información</td>';}
str+='</tbody>'
str+='</table>';str+='</div>';return str;}
function checktoken(){if(typeof readerSessionSII!=="undefined"&&readerSessionSII!==null&&readerSessionSII!=""){var sesionTokenLast=getCookie("TOKEN");if(sesionTokenLast==readerSessionSII.token&&sesionTokenLast!=""){respuestaUltimaVisitaRest(readerSessionSII.lastConexion);}else{location.reload();}}else{location.reload();}}
function checkAut(response){var lsSupport=false;if(localStorage){lsSupport=true;}
try{if(tknCon==null){tknCon=getCookie("TOKEN");if(lsSupport){sessionStorage.setItem("misiilastsesion",tknCon);}}
var data=sessionStorage.getItem("misiilastsesion");tknCon=getCookie("TOKEN");if(!(tknCon.localeCompare(data)==0)){location.reload();}
if(response){if(response.codigoResp=="-2"){location.reload();}}}catch(err){}}
function checkAutBoolean(response){var ret=true;var lsSupport=false;if(localStorage){lsSupport=true;}
try{if(tknCon==null){tknCon=getCookie("TOKEN");if(lsSupport){sessionStorage.setItem("misiilastsesion",tknCon);}}
var data=sessionStorage.getItem("misiilastsesion");tknCon=getCookie("TOKEN");if(!(tknCon.localeCompare(data)==0)){ret=false;}}catch(err){ret=false;}
return ret;}
function openTlUrl(url,target){var checkToken=checkAutBoolean();if(checkToken){window.open(url,target);}else{$("#recarga_sesion").fadeIn();setTimeout(function(){location.reload();},4000);}}
function callajaxJson(params,opt){switch(opt){case 14:container="lasVisitas";page=envio;var params="year=2015&opc=14&page=1";$.ajax({url:page,type:"post",dataType:"json",timeout:45000,data:params,cache:false,beforeSend:function(){waitingDialog.show();},success:function(data){checkAut(data);if(data.metaData.errors==null||data.metaData.errors==0){var array=data.data;var str=sctHead;str+=dialogM;str+='<div class="panel-body"><div class="no-more-tables">';str+='<table class="table table-striped table-bordered dataTable table-pagination display " id="tablaSct">';str+='<thead>';str+='<tr>';str+='<th width="10%" class="text-center">Fecha</th>';str+='<th width="10%" class="text-right">N° Visita</th>';str+='<th width="30%">Actividad(es) Realizada(s)</th>';str+='<th width="30%" >Dirección de la visita</th>';str+='<th class="text-center">Comprobante</th>';str+='</tr>    '
str+='</thead>'
str+='<tbody>';if(array==null){str+='<td >No registra información</td><td/><td/><td/><td/>';}else{for(var i=0;i<array.length;i++){var row=0;str+='<tr class="alt">';str+='<td><span style="display: block;min-width: 70px;text-align: center;" class="span_block">'+array[i].fechaVisita+'</span></td>'
str+='<td class="text-right">'+array[i].visita+'</td>';str+='<td>'+array[i].actividad+'</td>';str+='<td style="word-wrap: break-word;min-width: 160px;max-width: 160px;">'+array[i].direccion+'</td>';if(array[i].idAdjunto==null){str+='<td class="text-center">-</td>';}else{str+='<td class="text-center"><a class="btn btn-info btn-x" href="javascript:VerDocBS(\''+array[i].idAdjunto+'\')">Ver Visita</a></td>';}
str+='</tr>';row++;}
if(array.length==0){str+="<tr><td >No registra información.</td><td/><td/><td/><td/></tr>"}}
str+='</tbody>'
str+='</table>';str+='</table>';$("#"+container).html(str);waitingDialog.hide();$('#tablaSct').DataTable({"language":{"sProcessing":"Procesando...","sLengthMenu":"Mostrar _MENU_ Visitas","sZeroRecords":"No se encontraron resultados","sEmptyTable":"Ningún dato disponible en esta tabla","sInfo":"Mostrando  del _START_ al _END_ de un total de _TOTAL_ registros","sInfoEmpty":"Mostrando  del 0 al 0 de un total de 0 registros","sInfoFiltered":"(filtrado de un total de _MAX_ registros)","sInfoPostFix":"","sSearch":"Buscar:","sUrl":"","sInfoThousands":",","sLoadingRecords":"Cargando...","oPaginate":{"sFirst":"Primero","sLast":"Último","sNext":"Siguiente","sPrevious":"Anterior"},"oAria":{"sSortAscending":": Activar para ordenar la columna de manera ascendente","sSortDescending":": Activar para ordenar la columna de manera descendente"}},rowReorder:{selector:'td:nth-child(2)'},responsive:true});}else if(data.codigoResp=="-2"){location.reload();}else{alert("no datos");}},complete:function(){waitingDialog.hide();},error:function(){alert("En este momento no podemos atenderlo, por favor int\u00e9ntelo m\u00e1s tarde.");$(this).attr("disabled","false");}});break;case 200:container="notiCorrespondencia";page=envio;var params="opc=40&VIEW=1";if(corresCache!="")return;$.ajax({url:page,type:"post",dataType:"json",timeout:45000,data:params,cache:false,beforeSend:function(){$("#"+container).html("");waitingDialog.show();},success:function(data){var tipLetter="";if(data.estado=="0"){corresCache=data;var array=data.data;if(array==null){}
var str="";str+=cartasHead;str+=dialogM;str+='<table class="table table-striped table-bordered dataTable table-pagination display nowrap" id="tablaCartas">';str+='<thead>';str+='<tr>';str+='<th width="10%" class="text-center">Id</th>';str+='<th width="10%">Fecha</th>';str+='<th >Descripción </th>';str+='<th class="text-center">Ver detalle</th>';str+='</tr>    '
str+='</thead>'
str+='<tbody>';if(array==null){str+='<td  data-title="Conclusión">No registra información</td>';}else{for(var i=0;i<array.length;i++){var row=0;var idData=" ";idData=""+array[i].id;str+=(row%2==0)?'<tr class="alt">':'<tr>';if(idData==null){idData="";}
str+='<td>'+idData+'</td>';if(array[i].fecha==null)
str+='<td>-</td>';else{var ffechaFor=format(array[i].fecha,'dd-MM-yyyy');str+='<td><span class="span_block">'+(ffechaFor)+'</span></td>';}
str+='<td>'+array[i].descripcion+'</td>';if(array[i].tipo!=2&&array[i].tipo!=9&&array[i].tipo!=8){tipLetter="<div class='ic_correo'></div>";}else{tipLetter="<div class='ic_carta'></div>";}
str+='<td class="text-center"><a class="btn_comunicados" href="javascript:viewCorrespondencia('+idData+", "+array[i].tipo+", "+array[i].fecha+')"> '+tipLetter+'  <span>Ver detalle</span></a></td>';str+='</tr>';row++;}
if(array.length==0){str+="<tr><td>No registra información</td><td/><td/><td/></tr>"}}
str+='</tbody>'
str+='</table>';str+='<div class="bloque bloque-azul"><ul><li><a href="https://www4.sii.cl/validanotifInternet/">Validar firma electrónica avanzada</a></li></ul></div>';$("#"+container).append(str);$("#"+carga).hide();$('#tablaCartas').DataTable({"language":{"sProcessing":"Procesando...","sLengthMenu":"Mostrar _MENU_ Cartas","sZeroRecords":"No se encontraron resultados","sEmptyTable":"Ningún dato disponible en esta tabla","sInfo":"Mostrando  del _START_ al _END_ de un total de _TOTAL_ registros","sInfoEmpty":"Mostrando  del 0 al 0 de un total de 0 registros","sInfoFiltered":"(filtrado de un total de _MAX_ registros)","sInfoPostFix":"","sSearch":"Buscar:","sUrl":"","sInfoThousands":",","sLoadingRecords":"Cargando...","oPaginate":{"sFirst":"Primero","sLast":"Último","sNext":"Siguiente","sPrevious":"Anterior"},"oAria":{"sSortAscending":": Activar para ordenar la columna de manera ascendente","sSortDescending":": Activar para ordenar la columna de manera descendente"}},rowReorder:{selector:'td:nth-child(2)'},responsive:true});}else if(data.estado=="-2"){location.reload();}else if(data.estado=="1403"){corresCache=data;str+="<tr><td>No registra información</td><td/><td/><td/></tr>"
$("#"+container).html(str);corresCache=data;$("#"+carga).hide();}else{str+="<tr><td >No registra información</td><td/><td/><td/></tr>";$("#"+container).html(str);$("#"+carga).hide();corresCache=data;}},complete:function(){waitingDialog.hide();},error:function(){alert("En este momento no podemos atenderlo, por favor int\u00e9ntelo m\u00e1s tarde.");$(this).attr("disabled","false");}});break;case 201:container="notiNotif";page=envio;var params="opc=41&VIEW=1";if(notifCache!="")return;$.ajax({url:page,type:"post",dataType:"json",timeout:45000,data:params,cache:false,beforeSend:function(){$("#"+container).html("");waitingDialog.show();},success:function(data){var tipLetter="";if(data.estado=="0"){var array=data.data;notifCache=data;var str=notifHead;str+=dialogM;str+='<table class="table table-striped table-bordered dataTable table-pagination display nowrap" id="tablaNotifs">';str+='<thead>';str+='<tr>';str+='<th width="10%" class="text-center">Id</th>';str+='<th width="10%">Fecha</th>';str+='<th >Descripción </th>';str+='<th width="23%">Tipo de notificación </th>';str+='<th width="17%"class="text-center">Ver detalle</th>';str+='</tr>    '
str+='</thead>'
str+='<tbody>';if(array==null){str+='<td  data-title="Conclusión">No registra información</td>';}else{for(var i=0;i<array.length;i++){var row=0;var idData=" ";idData=""+array[i].id;str+=(row%2==0)?'<tr class="alt">':'<tr>';if(idData==null){idData="";}
str+='<td>'+idData+'</td>';if(array[i].fecha==null)
str+='<td>-</td>';else{var ffechaFor=format(array[i].fecha,'dd-MM-yyyy');str+='<td><span class="span_block">'+(ffechaFor)+'</span></td>';}
str+='<td>'+(array[i].descripcion!=null?array[i].descripcion:"-")+'</td>';if(array[i].tipo!=2&&array[i].tipo!=9&&array[i].tipo!=8){tipLetter="<div class='ic_correo'></div>";}else{tipLetter="<div class='ic_carta'></div>";}
str+='<td>'+(array[i].tipoNotificacion!=null?array[i].tipoNotificacion:"-")+'</td>';str+='<td class="text-center"><a class="btn_comunicados" data-toggle="tooltip" title="'+array[i].descTipo+'('+array[i].tipo+'" href="javascript:viewNotificacionesFormales('+idData+", "+array[i].tipo+", "+array[i].fecha+')">'+tipLetter+' <span>Ver detalle</span> </a></td>';str+='</tr>';row++;}
if(array.length==0){str+="<tr><td >No registra información</td><td/><td/><td/></tr>"}}
str+='</tbody>'
str+='</table>';str+='<strong>Importante: </strong>Lo informado en esta sección, para aquellas notificaciones distintas del tipo "Por Página Web" o "Sitio Personal", sólo constituirá un aviso y no una notificación, por lo que la omisión o cualquier defecto contenido en este aviso no viciará la notificación, sin que pueda el Servicio, salvo disposición legal en contrario, estimarla como una forma de notificación válida. <br/> ';str+='<div class="bloque bloque-azul"><ul><li><a href="https://www4.sii.cl/validanotifInternet/">Validar firma electrónica avanzada</a></li></ul></div>';$("#"+container).html(str);$("#"+carga).hide();$('#tablaNotifs').DataTable({"language":{"sProcessing":"Procesando...","sLengthMenu":"Mostrar _MENU_ Notificaciones","sZeroRecords":"No se encontraron resultados","sEmptyTable":"Ningún dato disponible en esta tabla","sInfo":"Mostrando  del _START_ al _END_ de un total de _TOTAL_ registros","sInfoEmpty":"Mostrando  del 0 al 0 de un total de 0 registros","sInfoFiltered":"(filtrado de un total de _MAX_ registros)","sInfoPostFix":"","sSearch":"Buscar:","sUrl":"","sInfoThousands":",","sLoadingRecords":"Cargando...","oPaginate":{"sFirst":"Primero","sLast":"Último","sNext":"Siguiente","sPrevious":"Anterior"},"oAria":{"sSortAscending":": Activar para ordenar la columna de manera ascendente","sSortDescending":": Activar para ordenar la columna de manera descendente"}},rowReorder:{selector:'td:nth-child(2)'},responsive:true});}else if(data.codigoResp=="-2"){location.reload();}else if(data.estado=="1403"){notifCache=data;str+="<tr><td >No registra información</td><td/><td/><td/></tr>";$("#"+container).html(str);$("#"+carga).hide();}else{str+="<tr><td >No registra información</td><td/><td/><td/></tr>";$("#"+container).html(str);$("#"+carga).hide();}},complete:function(){waitingDialog.hide();},error:function(){alert("En este momento no podemos atenderlo, por favor int\u00e9ntelo m\u00e1s tarde.");$(this).attr("disabled","false");}});break;case 21:page=envio;var params="year=2015&OPT=21&MODE=1&VIEW=1&PERIODO=02016";$.ajax({url:page,type:"post",dataType:"json",timeout:45000,data:params,cache:false,beforeSend:function(){$("#"+container).html("");waitingDialog.show();},success:function(data){if(data.codigoResp=="0"){var array=data.listaDocumentos;if(array==null){}
var str=cartasHead;str+=dialogM;str+='<table class="table table-striped table-bordered dataTable table-pagination display nowrap" id="tablaCartas">';str+='<thead>';str+='<tr>';str+='<th width="10%" class="text-center">Id</th>';str+='<th width="10%">Fecha</th>';str+='<th >Descripción </th>';str+='<th class="text-center"># Carta</th>';str+='<th class="text-center">Ver Carta</th>';str+='</tr>    '
str+='</thead>'
str+='<tbody>';if(array==null){str+='<td  data-title="Conclusión">No registra información</td>';}else{for(var i=0;i<array.length;i++){var row=0;str+=(row%2==0)?'<tr class="alt">':'<tr>';str+='<td>'+array[i].repoId+'</td>';if(array[i].fechaFirma==null)
str+='<td>-</td>';else
str+='<td>'+(array[i].fechaFirma)+'</td>';str+='<td>'+array[i].descTipoCarta+'</td>';str+='<td class="text-center">'+array[i].repoNumero+'</td>';str+='<td class="text-center"><a class="btn btn-info btn-x" href="javascript:VerDoc('+array[i].repoId+')">Ver</a></td>';str+='</tr>';row++;}
if(array.length==0){str+="<tr><td colspan='6'>No registra información</td></tr>"}}
str+='</tbody>'
str+='</table>';str+='<div class="bloque bloque-azul"><ul><li><a href="https://www4.sii.cl/validanotifInternet/">Validar firma electrónica avanzada</a></li></ul></div>';$("#"+container).html(str);$("#"+carga).hide();$('#tablaCartas').DataTable({"language":{"sProcessing":"Procesando...","sLengthMenu":"Mostrar _MENU_ Cartas","sZeroRecords":"No se encontraron resultados","sEmptyTable":"Ningún dato disponible en esta tabla","sInfo":"Mostrando  del _START_ al _END_ de un total de _TOTAL_ registros","sInfoEmpty":"Mostrando  del 0 al 0 de un total de 0 registros","sInfoFiltered":"(filtrado de un total de _MAX_ registros)","sInfoPostFix":"","sSearch":"Buscar:","sUrl":"","sInfoThousands":",","sLoadingRecords":"Cargando...","oPaginate":{"sFirst":"Primero","sLast":"Último","sNext":"Siguiente","sPrevious":"Anterior"},"oAria":{"sSortAscending":": Activar para ordenar la columna de manera ascendente","sSortDescending":": Activar para ordenar la columna de manera descendente"}},rowReorder:{selector:'td:nth-child(2)'},responsive:true});}else if(data.codigoResp=="-2"){location.reload();}else{alert("no datos");}},complete:function(){waitingDialog.hide();},error:function(){alert("En este momento no podemos atenderlo, por favor int\u00e9ntelo m\u00e1s tarde.");$(this).attr("disabled","false");}});break;case 16:page=envio+"year=2015&OPT=16&VIEW=1&PERIODO=2016&MODE=7&opc=16";opt=params;if(opt.indexOf("OPT=16")!=-1){laOpcion=16;if(opt.indexOf("MODE=")==-1)opt=opt+"&MODE=7&opc=16"}
$("#"+cargaInbox).show();$.ajax({url:page,type:"get",beforeSend:function(){$("#"+containerIbox).html("");$("#"+cargaInbox).show();},success:function(data){array=data;if(array){if(data.codigoResp=="-2"){location.reload();}
var str=notisimplefHead;str+=notisimpleText;str+=dialogM;str+='';str+='<div class="table-responsive">';str+='<table class="table table-striped table-bordered dataTable" summary="Mis Cartas" id="tablaNotificaciones">';str+='<thead>';str+='<tr>';str+='<th class="text-center" style="width:10%;vertical-align:middle">Id</th>';str+='<th class="text-center" style="width:25%">Fecha</th>';str+='<th style="width:35%;vertical-align:middle">Descripción </th>';str+='<th class="text-center" style="vertical-align:middle">Tipo Documento</th>';str+='<th class="text-center" style="vertical-align:middle">Ver Adjunto</th>';str+='<th class="text-center">Ver Correo</th>';str+='</tr>    '
str+='</thead>'
str+='<tbody>';if(array==null){str+='<td  data-title="Conclusión">No registra información</td>';}else{for(var i=0;i<array.length;i++){var row=0;str+=(row%2==0)?'<tr class="alt">':'<tr>';str+='<td class="text-center">'+array[i].id+'</td>';if(array[i].fecha==null)
str+='<td>-</td>';else
str+='<td >'+(array[i].fecha)+'</td>';if(array[i].descripcion==null)
str+='<td>-</td>';else
str+='<td>'+array[i].descripcion+'</td>';str+='<td>'+(array[i].tipo.capitalize())+'</td>';if(array[i].tipoDescripcion=="00"){str+='<td align="center" >';str+='<a class="btn btn-info btn-x" href="javascript:VerDoc('+array[i].id+')">Ver Pdf</a>';str+='</td><td>-</td>';}
if(array[i].tipoDescripcion=="01"){str+='<td align="center"><a class="btn btn-info btn-x" href="javascript:VerDoc('+array[i].id+')">Ver Pdf</a></td>';str+='</td><td>-</td><td>-</td>';}
if(array[i].tipoDescripcion=="02"||array[i].tipoDescripcion=="03"){str+='<td>-</td>';str+='<td align="center"><a class="btn btn-info btn-x"  href="javascript:viewDocHtmlCorreo('+array[i].id+')">Ver Correo</a></td>';}
str+='</tr>';row++;}
if(array.length==0){str+="<tr><td colspan='7'>No registra información</td></tr>"}}
str+='</tbody>'
str+='</table> </div>';str+='<div class="bloque bloque-azul"><ul><li><a href="https://www4.sii.cl/validanotifInternet/">Validar firma electrónica avanzada</a></li></ul></div>';$('#'+containerIbox).html(str);$("#"+cargaInbox).hide();$('#tablaNotificaciones').DataTable({"language":{"sProcessing":"Procesando...","sLengthMenu":"Mostrar _MENU_ Notificaciones","sZeroRecords":"No se encontraron resultados","sEmptyTable":"Ningún dato disponible en esta tabla","sInfo":"Mostrando del _START_ al _END_ de un total de _TOTAL_ registros","sInfoEmpty":"Mostrando del 0 al 0 de un total de 0 registros","sInfoFiltered":"(filtrado de un total de _MAX_ registros)","sInfoPostFix":"","sSearch":"Buscar:","sUrl":"","sInfoThousands":",","sLoadingRecords":"Cargando...","oPaginate":{"sFirst":"Primero","sLast":"Último","sNext":"Siguiente","sPrevious":"Anterior"},"oAria":{"sSortAscending":": Activar para ordenar la columna de manera ascendente","sSortDescending":": Activar para ordenar la columna de manera descendente"}}});}else if(data==null){alert("No existen datos para la opción seleccionada.");}else if(data.codigoResp=="-2"){location.reload();}else{alert("no datos");}},dataType:"json",timeout:45000,data:params,cache:false,complete:function(){$("#"+cargaInbox).hide();},error:function(){alert("En este momento no podemos atenderlo, por favor int\u00e9ntelo m\u00e1s tarde.");$(this).attr("disabled","false");}});$('#myPleaseWait').modal('hide');break;case 96:page=envio+"year=2015&OPT=96&VIEW=1&PERIODO=2016&MODE=7&opc=8";opt=params;if(opt.indexOf("OPT=96")!=-1){laOpcion=96;if(opt.indexOf("MODE=")==-1)opt=opt+"&MODE=7&opc=8"}
$("#"+carga).show();$.ajax({url:page,type:"get",beforeSend:function(){$("#"+containerIbox).html("");$("#"+cargaInbox).show();},success:function(data){array=data;if(array){if(data.codigoResp=="-2"){location.reload();}
var str=notifHead;str+=dialogM;str+='';str+='<div class="table-responsive">';str+='<table class="table table-striped table-bordered dataTable" summary="Mis Notificaciones" id="tablaNotificaciones">';str+='<thead>';str+='<tr>';str+='<th class="text-center" style="width:10%;vertical-align:middle">Id</th>';str+='<th class="text-center" style="width:25%">Fecha</th>';str+='<th style="width:35%;vertical-align:middle">Descripción </th>';str+='<th class="text-center" style="vertical-align:middle">Notificación</th>';str+='<th class="text-center" style="vertical-align:middle">Ver Actuación</th>';str+='<th class="text-center">Ver Notificacion</th>';str+='<th class="text-center">Ver Certificado</th>';str+='</tr>    '
str+='</thead>'
str+='<tbody>';if(array==null){str+='<td  data-title="Conclusión">No registra información</td>';}else{for(var i=0;i<array.length;i++){var row=0;str+=(row%2==0)?'<tr class="alt">':'<tr>';str+='<td class="text-center">'+array[i].id+'</td>';if(array[i].fecha==null)
str+='<td>-</td>';else
str+='<td >'+(array[i].fecha)+'</td>';if(array[i].descripcion==null)
str+='<td>-</td>';else
str+='<td>'+array[i].descripcion+'</td>';str+='<td>'+(array[i].tipo.capitalize())+'</td>';if(array[i].tipoDescripcion=="00"){str+='<td align="center" >';str+='<a class="btn btn-info btn-x" href="javascript:VerDoc('+array[i].id+')">Ver Pdf</a>';str+='</td><td>-</td><td>-</td>';}
if(array[i].tipoDescripcion=="01"){str+='<td align="center"><a class="btn btn-info btn-x" href="javascript:VerDoc('+array[i].id+')">Ver Pdf</a></td>';str+='<td align="center"><a class="btn btn-info btn-x" href="javascript:viewDocActuacion('+array[i].id+')">Ver Pdf</a></td>';str+='<td>-</td>';}
if(array[i].tipoDescripcion=="02"||array[i].tipoDescripcion=="03"){str+='<td align="center">   <a class="btn btn-info btn-x" href="javascript:viewDocAdjCorreo('+array[i].id+')"> Ver Pdf</a></td>';str+='<td align="center"><a class="btn btn-info btn-x"  href="javascript:viewDocHtmlCorreo('+array[i].id+')">Ver Correo</a></td>';str+='<td align="center"><a class="btn btn-info btn-x" href="javascript:viewDocCertificado('+array[i].id+')">Ver Pdf</a> </td>';}
str+='</tr>';row++;}
if(array.length==0){str+="<tr><td colspan='7'>No registra información</td></tr>"}}
str+='</tbody>'
str+='</table> </div>';str+='<div class="bloque bloque-azul"><ul><li><a href="https://www4.sii.cl/validanotifInternet/">Validar firma electrónica avanzada</a></li></ul></div>';$('#'+containerIbox).html(str);$("#"+cargaInbox).hide();$('#tablaNotificaciones').DataTable({"language":{"sProcessing":"Procesando...","sLengthMenu":"Mostrar _MENU_ Notificaciones","sZeroRecords":"No se encontraron resultados","sEmptyTable":"Ningún dato disponible en esta tabla","sInfo":"Mostrando del _START_ al _END_ de un total de _TOTAL_ registros","sInfoEmpty":"Mostrando del 0 al 0 de un total de 0 registros","sInfoFiltered":"(filtrado de un total de _MAX_ registros)","sInfoPostFix":"","sSearch":"Buscar:","sUrl":"","sInfoThousands":",","sLoadingRecords":"Cargando...","oPaginate":{"sFirst":"Primero","sLast":"Último","sNext":"Siguiente","sPrevious":"Anterior"},"oAria":{"sSortAscending":": Activar para ordenar la columna de manera ascendente","sSortDescending":": Activar para ordenar la columna de manera descendente"}}});}else if(data==null){alert("No existen datos para la opción seleccionada.");}else if(data.codigoResp=="-2"){location.reload();}else{alert("no datos");}},dataType:"json",timeout:45000,data:params,cache:false,complete:function(){$("#"+cargaInbox).hide();},error:function(){alert("En este momento no podemos atenderlo, por favor int\u00e9ntelo m\u00e1s tarde.");$(this).attr("disabled","false");}});$('#myPleaseWait').modal('hide');break;case 97:page=envio;params="&opc=13&VIEW=1";data=DatosCntrNoti;if(data){if(data.resp.estado==1&&data.resp.glosa=="OK"){correoNoti=data.atribnoti.atrcValor;if(document.getElementById("idCorreoNoti")){document.getElementById("idCorreoNoti").textContent=correoNoti;if(document.getElementById('divmMailNoti'))document.getElementById('divmMailNoti').style.display="inline";}
if(document.getElementById("mailCntrNoti")){document.getElementById("mailCntrNoti").textContent=correoNoti;if(document.getElementById('divmMailNoti'))document.getElementById('divmMailNoti').style.display="inline";}}}
if(document.getElementById("mailCntr")&&(correoNoti==null||correoNoti=="")){if(document.getElementById('divmMailcontacto'))document.getElementById('divmMailcontacto').style.display="inline";}
break;case 98:page=envio;params="&opc=22&VIEW=1";str='<div class="panel-body"><div class="no-more-tables"> <table class="tablaInterna  table-bordered">';str+='<thead class="cf"> <tr><th  class="text-center" style="vertical-align:middle;background-color: #deebf7;">Descripción</th><th class="text-center"  class="text-center" style="vertical-align:middle;background-color: #deebf7;">Fecha inicio </th> </tr> </thead> <tbody>'
var containerAttr="contenido-mis-attr";var cargaAttr="miCarAt";if(attrCache==""){$("#"+containerAttr).html("");$("#"+cargaAttr).show();attrCache=DatosCntrNow;str+=displayAttrCntrRiac(attrCache);$("#"+cargaAttr).hide();}else{str+=displayAttrCntrRiac(attrCache);}
str+='</tbody></table>';$('#'+containerAttr).html(str);break;case 982:page=envio;params="&opc=22&VIEW=1";str='<div class="panel-body"><div class="no-more-tables"> <table class="tablaInterna  table-bordered">';str+='<thead class="cf"> <tr><th  class="text-center" style="vertical-align:middle;background-color: #deebf7;">Descripción</th><th class="text-center"  class="text-center" style="vertical-align:middle;background-color: #deebf7;">Fecha inicio </th> </tr> </thead> <tbody>'
var containerAttr="contenido-mis-attr";var cargaAttr="miCarAt";if(attrCache==""){$.ajax({url:page,type:"post",async:false,beforeSend:function(){$("#"+containerAttr).html("");$("#"+cargaAttr).show();},success:function(data){attrCache=data;str+=displayAttrCntrRiac(data);},dataType:"json",timeout:45000,data:params,cache:false,complete:function(){$("#"+cargaAttr).hide();},error:function(){alert("En este momento no podemos atenderlo, por favor int\u00e9ntelo m\u00e1s tarde.");$(this).attr("disabled","false");}});}else{str+=displayAttrCntrRiac(attrCache);}
str+='</tbody></table>';$('#'+containerAttr).html(str);break;case 100:var metaData;var ErroresLectura=false;page=envio+"year=2015";var str=seeHead;str+=seeText;str+=dialogM;str+='<div class="panel-body">';str+='<div class="table-responsive">';str+='<table  class=\'tablaInterna table-bordered \' >';str+='<thead>';str+='<tr>';str+='<th width="2%" class="text-center">Id</th>';str+='<th width="5%" style="text-align:center;">Estado</th>';str+='<th style="text-align:center;width: 8%;">Fecha Creación</th>';str+='<th style="text-align:center;width: 8%;">Fecha Modificación</th>';str+='<th style="text-align:center;width: 15%;">Materia</th>';str+='<th style="text-align:center;width: 25%;">Encargado</th>';str+='</tr>    '
str+='</thead>'
str+='<tbody>';$.ajax({url:page,type:"post",beforeSend:function(){$("#"+container).html("");waitingDialog.show();},async:false,success:function(data){if(data!=null){var array=data.data;metaData=data.metaData;if(data.data!=null&&data.data!=undefined){if(array==null||array[0]==null){str+='<td  data-title="Conclusión">No registra información</td>';}else{for(var i=0;i<array.length;i++){var row=0;str+=(row%2==0)?'<tr class="alt">':'<tr>';str+='<td class="text-center">'+array[i].id+' </td>';str+='<td class="text-center">'+array[i].estado+' </td>';str+='<td class="text-center">';if(array[i].fechaCreacion!=null){var sdatecap=convertDate(array[i].fechaCreacion);str+=sdatecap;}else{str+=" ";}
str+='</td>';str+='<td class="text-center">';if(array[i].fechaModificacion!=null){var sdatecap=convertDate(array[i].fechaModificacion);str+=sdatecap;}else{str+=" ";}
str+='</td>';str+='<td class="text-center" style="overflow:hidden;word-wrap:break-word;">'+array[i].materia+'</td>';str+='<td >';var vlrencargado=array[i].responsable;if(vlrencargado!=null){str+=vlrencargado.nombres;str+=' '+vlrencargado.apellidoPaterno;str+=' '+vlrencargado.apellidoMaterno;}else{str+='-';}
str+='</td>';str+='</tr>';row++;}
if(array.length==0){str+="<tr><td colspan='7'>No registra información</td></tr>"}}}else{str+='<tr><td colspan="7"  data-title="Conclusión">No se tienen datos de este tipo.</td></tr>';$('#'+container).html(str);ErroresLectura=false;$("#"+carga).hide();return;}}else{str+='<tr><td colspan="7">No se recuperó información.</td></tr>';}},dataType:"json",timeout:45000,data:params,cache:false,complete:function(){waitingDialog.hide();},error:function(jqXHR,exception){if(jqXHR.status===0){alert('No está conectado.\n Verificar red.');}else if(jqXHR.status==404){alert('Página no encontrada. [404]');}else if(jqXHR.status==500){alert('Internal Server Error [500].');}else if(exception==='parsererror'){alert('Respuesta erronea, no pudo ser procesada');}else if(exception==='timeout'){alert('Time out error.');}else if(exception==='abort'){alert('Ajax request aborted.');}else{alert('En este momento no podemos atenderlo, por favor int\u00e9ntelo m\u00e1s tarde.\n'+jqXHR.responseText);}
$(this).attr("disabled","false");}});str+='</tbody>'
str+='</table>';if(metaData!=null){if(pagina=metaData.page!=undefined){var pagina=metaData.page;var PrevParam="";if((pagina.currentPageIndex-1)<=0){PrevParam="year=0&opc=10&OPT=100&VIEW=1&MODE=1&page=1";}else{PrevParam="year=0&opc=10&OPT=100&VIEW=1&MODE=1&page="+(0+pagina.currentPageIndex-1);}
var NextParam="";if((pagina.currentPageIndex+1)>=pagina.lastPageIndex){NextParam="year=0&opc=10&OPT=100&VIEW=1&MODE=1&page="+(0+pagina.lastPageIndex);}else{NextParam="year=0&opc=10&OPT=100&VIEW=1&MODE=1&page="+(0+pagina.currentPageIndex+1);}
var lastParam="year=0&opc=10&OPT=100&VIEW=1&MODE=1&page="+(0+pagina.lastPageIndex);str+="<div class='right-block'><table class='tablaInterna table-bordered '  style=\"float:none;margin:0 auto;\"> <tbody><tr>";str+="<td><a href='javascript:call_option(100)'> <i class='fa fa-fast-backward fa-2' aria-hidden='true'></i>  </a></td>";str+="<td><a href='javascript:callajaxJson(\""+PrevParam+"\", 100)'>  <i class=\"fa fa-backward\" aria-hidden=\"true\"></i></a></td>";str+="<td>Página "+pagina.currentPageIndex+" de "+pagina.lastPageIndex+"</td>";str+="<td><a href='javascript:callajaxJson(\""+NextParam+"\", 100)'>  <i class=\"fa fa-forward\" aria-hidden=\"true\"></i> </a></td>";str+="<td><a href='javascript:callajaxJson(\""+lastParam+"\", 100)'>  <i class=\"fa fa-fast-forward\" aria-hidden=\"true\" fa-2></i> </a></td>";str+="</tr></tbody></table></div>";}}
str+='</div>';str+='</div>';str+='<table class="tablaInterna table-bordered ">';str+='<thead>';str+='<tr>';str+='<th width="60%" style="text-align:center;">Carpetas de Temas de Interés</th>';str+='<th style="text-align:center;width: 8%;">Documentos por Carpeta</th>';str+='</tr>    '
str+='</thead>'
str+='<tbody>';if(ErroresLectura==false){$.ajax({url:page,type:"post",async:false,beforeSend:function(){$("#"+carga).show();},success:function(data){if(data!=null){str+=seeCarpets;str+="";var cCarpetas=data.data.carpetas;if(data.data.carpetas!=null){for(var i=0;i<cCarpetas.length;i++){if(cCarpetas[i]!=null){str+=(i%2==0)?'<tr class="alt">':'<tr>';str+='<td align="left">'+cCarpetas[i].nombre+' </td>';str+='<td align="center">'+cCarpetas[i].numeroDocumentos+' </td>';str+='</tr>';}}}
if(cCarpetas===null){str+='<tr><td colspan="2">No se recuperó información.</td></tr>';}}},dataType:"json",timeout:45000,data:'opc=11&page=1',cache:false,complete:function(){$("#"+carga).hide();},error:function(){alert("En este momento no podemos atenderlo, por favor int\u00e9ntelo m\u00e1s tarde.");$(this).attr("disabled","false");}});}
str+='<tbody></table>';str+=""
str+="Para ver y/o adjuntar documentación a <strong>Expedientes</strong> o <strong>Carpetas</strong> seleccione el siguiente botón:"
str+='<div style="text-align:center">  ';str+='<button  class="btn btn-primary btn-block" onclick="window.location.href=\''
str+=seepath;str+='\'">Acceder</button>';str+='</div> ';$('#'+container).html(str);$("#"+carga).hide();break;case 24:page=envio;params="&opc=24&VIEW=1";var cContainerCntr="contenido-mis-datos";$.ajax({url:page,type:"post",success:function(dataResponse){if(dataResponse){if(dataResponse.respCod==0){var strHtml=panelDataF22s(dataResponse);$("#"+cContainerCntr).empty()
$("#"+cContainerCntr).append(strHtml)}}},dataType:"json",timeout:45000,data:params,cache:false,error:function(){alert("En este momento no podemos atenderlo, por favor int\u00e9ntelo m\u00e1s tarde.");$(this).attr("disabled","false");}});break;default:if(OPT=21)
var params=opt;$.ajax({url:page,type:"post",success:function(data){$("#"+carga).hide();$("#"+container).html(data);},dataType:"html",timeout:45000,data:params,cache:false,beforeSend:function(){$("#"+container).html("");$("#"+carga).show();},complete:function(){$("#"+carga).hide();},error:function(){alert("En este momento no podemos atenderlo, por favor int\u00e9ntelo m\u00e1s tarde.");$(this).attr("disabled","false");}});}}
function displayAttrCntrRiac(data){var str="";var strRegimen="";if(data){if(data.codigoError==-2){str="Su sesión de trabajo ha expirado debe volver a autenticarse.<input type='button' name='Autenticarse' onclick='location.reload(true);' value='Autenticarse' />"}
if(data.atributos.length>0){var dataSet=[];dataDet=data.atributos;dataDet.sort(function(a,b){var dateA=new Date(a.fechaInicio.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"));var dateB=new Date(b.fechaInicio.replace(/(\d{2})-(\d{2})-(\d{4})/,"$2/$1/$3"));return dateB-dateA;});linksAtributosCntrb="";linksAtributosCntrb+='<div class="bloque bloque-azul"><ul>';linksAtributosCntrb="";var es14d1=false;var escpym=false;var regData="";for(var i=0;i<dataDet.length;i++){str+='<tr>';str+='<td data-title="Descripción" class="text-justify">'+dataDet[i].descAtrCodigo+'</td>';str+='<td data-title="Fecha de Inicio" class="text-center">'+dataDet[i].fechaInicio+'</td>';str+='</tr>';if(dataDet[i].atrCodigo=="R14A"||dataDet[i].atrCodigo=="S14B"||dataDet[i].atrCodigo=="CRRP"||dataDet[i].atrCodigo=="CS14"||dataDet[i].atrCodigo=="EMTP"||dataDet[i].atrCodigo=="14D1"||dataDet[i].atrCodigo=="14TT"||dataDet[i].atrCodigo=="M14A"||dataDet[i].atrCodigo=="CRRP"||dataDet[i].atrCodigo=="M14G"){strRegimen+="";strRegimen+='<div class="icon_user_info" id="attr'+dataDet[i].atrCodigo+'" data-toggle="tooltip" title="">';strRegimen+=dataDet[i].descAtrCodigo;strRegimen+='</div>';}
if(dataDet[i].atrCodigo=="14D1"){es14d1=true;}
if(dataDet[i].atrCodigo=="CPYM"){escpym=true;regData=dataDet[i].descAtrCodigo+" "+dataDet[i].valor;}
if(dataDet[i].atrCodigo=="BHE2"){linksAtributosCntrb+='<li><a href="http://www.sii.cl/servicios_online/1040-1287.html#-collapseOne">Emisor BHE</a><br></li>';}
if(dataDet[i].atrCodigo=="FPYM"){facturadorfpym=1;linksAtributosCntrb+='<li><a href="http://www.sii.cl/servicios_online/1039-1183.html">Sistema de  Facturación gratuito del SII</a><br></li>';}
if(dataDet[i].atrCodigo=="FAEL"){linksAtributosCntrb+='<li><a href="http://www.sii.cl/servicios_online/1039-1184.html">Sistema de Facturación de mercado</a><br></li>';}
if(dataDet[i].atrCodigo=="NOTI"){correoNoti=dataDet[i].valor;}}
if(es14d1&&escpym){strRegimen+='<div class="icon_user_info" id="attrEscpym" data-toggle="tooltip" title="">';strRegimen+=regData;strRegimen+='</div>';}
if(strRegimen!=""){$('#box_user_info').html(strRegimen);}
linksAtributosCntrb+='</ul></div>';}
if(data.atributos.length==0){str+='<tr><td colspan="2">No hay Datos</td></tr>';}
if(correoNoti!=""){if(document.getElementById("idCorreoNoti")){document.getElementById("idCorreoNoti").textContent=correoNoti;if(document.getElementById('divmMailNoti'))document.getElementById('divmMailNoti').style.display="inline";}
if(document.getElementById("mailCntrNoti")){document.getElementById("mailCntrNoti").textContent=correoNoti;if(document.getElementById('divmMailNoti'))document.getElementById('divmMailNoti').style.display="inline";}}else{if(document.getElementById("mailCntr")&&(correoNoti==null||correoNoti=="")){if(document.getElementById('divmMailcontacto'))document.getElementById('divmMailcontacto').style.display="inline";}}}
return str;}
function displaySegmento(data){return;if(data){if(data.codigoError==0){var dataSet=[];dataDet=data.contribuyente;if(dataDet.segmentoCodigo=="SGGC"){if(document.getElementById('attrSGGC'))document.getElementById('attrSGGC').style.display="inline";}
if(dataDet.segmentoCodigo=="SGME"){if(document.getElementById('attrSGME'))document.getElementById('attrSGME').style.display="inline";}
if(dataDet.segmentoCodigo=="SGMI"){if(document.getElementById('attrSGMI'))document.getElementById('attrSGMI').style.display="inline";}
if(dataDet.segmentoCodigo=="SGPE"){if(document.getElementById('attrSGPE'))document.getElementById('attrSGPE').style.display="inline";}
if(dataDet.segmentoCodigo=="SGPM"){if(document.getElementById('attrSGPM'))document.getElementById('attrSGPM').style.display="inline";}}}}
function callAttribs(){params="OPT=12&VIEW=1";page=envio+"year=2015";$.ajax({url:page,type:"post",success:function(data){$("#miCarAt").hide();$("#contenido-mis-attr").html(data);},dataType:"html",timeout:45000,data:params,cache:false,beforeSend:function(){$("#contenido-mis-attr").html("");$("#miCarAt").show();},complete:function(){$("#miCarAt").hide();},error:function(){alert("En este momento no podemos atenderlo, por favor int\u00e9ntelo m\u00e1s tarde.");$(this).attr("disabled","false");}});}
function procesarRespuesta(ajaxResponse,Status){$("#"+carga).hide();$('#'+container).html(ajaxResponse);}
function procesarRespuestaInterna(ajaxResponse,Status){$('#subcontenido').html(ajaxResponse);}
function callback_error(ajaxResponse,Status){$("#"+carga).hide();}
function process(cgiajax,params,tipoResp,procesarRespuesta,callback_error,container,carga){$.ajax({url:cgiajax,type:"post",data:params,error:callback_error,beforeSend:function(){$("#"+container).html("");$("#"+carga).show();},complete:function(){$("#"+carga).hide();},error:function(){alert("En este momento no podemos atenderlo, por favor int\u00e9ntelo m\u00e1s tarde.");$(this).attr("disabled","false");},dataType:tipoResp,success:procesarRespuesta,type:'post'});}
function rentacall(periodo){var params="OPT=13&FORM=22&VIEW=2&PERIODO="+periodo+"&rnd="+Math.random();callajaxInterno(params);}
function f50call(periodo){var params="OPT=11&FORM=50&VIEW=2&PERIODO="+periodo+"&rnd="+Math.random();callajaxInterno(params);}
function f29call(periodo){var params="OPT=10&FORM=29&VIEW=2&PERIODO="+periodo+"&rnd="+Math.random();callajaxInterno(params);}
function djcall(periodo){var params="OPT=18&VIEW=2&PERIODO="+periodo+"&rnd="+Math.random();year_choose=periodo;callajaxInterno(params);}
function dj3600call(periodo){var params="OPT=19&FORM=3600&TIPO=1&VIEW=2&PERIODO="+periodo+"&rnd="+Math.random();callajaxInterno(params);}
function ivaexp3600call(periodo){var params="OPT=20&FORM=3600&TIPO=2&VIEW=2&PERIODO="+periodo+"&rnd="+Math.random();callajaxInterno(params);}
function cabecera_emergente(){$("#emgRut").html(miRutMISII);$("#emgNombre").html(minombreMisii);}
function VerDoc(sid){VerDocumentoMisii(sid,2);}
function VerDocBS(sid){VerDocumentoMisii(sid,15);}
function viewDocActuacion(sid){VerDocumentoMisii(sid,3);}
function viewDocAdjCorreo(sid){VerDocumentoMisii(sid,5);}
function viewDocCertificado(sid){VerDocumentoMisii(sid,7);}
function VerDocumentoMisii(sid,ropc){var trepoId=sid;var parametros="opc="+ropc+"&repoId="+trepoId+"&rnd="+Math.random()+"&file.pdf";pdf_link=envio+parametros
var iframe='<object type="application/pdf" data="'+pdf_link+'" width="100%" height="700" download>No se soporta visualización<a href="'+pdf_link+'" role="button" class="btn btn-success btn-large" download="'+pdf_link+'"  type="application/octet-stream" target="_blank">Descargar PDF</a><p class="text-justify">En algunos navegadores para bajar correctamente los archivos debe presionar el link un momento para después seleccionar <strong>Grabar Vinculo</strong></p></object>'
if(ropc==15)
trepoId="Documento de la visita";$.createModal({title:'Visualizando ['+trepoId+"]",message:iframe,closeButton:true,scrollable:false});}
function viewDocHtmlCorreo(sid){var htmlString="";var parametros="";parametros=parametros+"opc=41";parametros=parametros+"&repoId="+sid+"&rnd="+Math.random();var rebaba='<html xmlns:ex=\"http://exslt.org/dates-and-times\" xmlns:b64=\"http://www.oracle.com/XSL/Transform/java/weblogic.apache.xerces.impl.dv.util.Base64\">'
var res=htmlString.replace(rebaba,"<html>");$.ajax({url:envio,data:parametros,type:"post",success:function(data){if(data.codigoResp=="0"){htmlString="<table><tbody><tr><td>Asunto </td> <td>:"+data.asunto+"</td></tr>";htmlString+="<tr><td>Destinatario</td> <td>:"+data.destinatario+"</td></tr>";htmlString+="<tr><td>Nombre Destinatario</td> <td>:"+data.nombreDestinatario+"</td></tr>";htmlString+="</tbody></table>";htmlString+="<table class='tabla'><tbody><tr><td>";htmlString+=data.html;htmlString+="</td> </tr>";htmlString+="</tbody></table>";}else{htmlString="<p>No se puedo realizar la operación en este momento</p>";}},async:false,dataType:"json",timeout:45000,cache:false,error:function(){alert("En este momento no podemos atenderlo, por favor int\u00e9ntelo m\u00e1s tarde.");$(this).attr("disabled","false");}});$.createModal({title:'Correo ['+sid+"]",message:htmlString,closeButton:true,scrollable:false});}
function down(){var txtdiv="<div style='width:100%'>";txtdiv=txtdiv+"<div class='nmenu'><b class='btop1'></b><b class='btop2'></b><b class='btop3'></b><b class='btop4'></b>";txtdiv=txtdiv+"<div class='title-menu'><h2>Opción Suspendida Momentáneamente<br></h2></div>";txtdiv=txtdiv+"<div class='alert alert-warning' role='alert'>Estimado contribuyente, el Servicio de Impuestos Internos comunica que esta opción se encuentra suspendida momentáneamente.</div><p class='text-justify'>Hemos detectado que en algunas oportunidades este aviso aparece cuando no debería hacerlo. Para ello, le recomendamos actualizar la página desde la cual accedió a esta aplicación, digitando la tecla F5.</p><p>Agradecemos su comprensión.</p>";txtdiv=txtdiv+"<b class='bbot4'></b><b class='bbot3'></b><b class='bbot2'></b><b class='bbot1'></b></div></div></div>";document.getElementById("contenido-mis-datos").innerHTML=txtdiv;}
function viewCartaCtr(sid){viewNotificaciones(sid,2);}
function viewActuacion(sid){viewNotificaciones(sid,3);}
function viewAdjCorreo(sid){viewNotificaciones(sid,5);}
function viewCertificado(sid){viewNotificaciones(sid,7);}
function viewCorrespondencia(sid,view,fecha){viewComunicaciones(sid,view,fecha,2);}
function viewNotificacionesFormales(sid,view,fecha){viewComunicaciones(sid,view,fecha,1);}
function viewComunicaciones(sid,view,fecha,noti){var newwindow;var enVentana=false;var parametros="";var position=0;var end=0;var version=0;var ancho=1024;var alto=720;var htmlString="";var htmlAttach="";var htmlCertificado="";var myBase64string="";var base64file="";var base64fileName="";if(noti==2){parametros="opc=42";}else{parametros="opc=43";}
parametros=parametros+"&MODE="+view;;parametros=parametros+"&repoId="+sid+"&rnd="+Math.random();;if(navigator.userAgent.search("MSIE")>=0){var position=navigator.userAgent.search("MSIE")+5;var end=navigator.userAgent.search("; Windows");var version=navigator.userAgent.substring(position,end);if(version<7){enVentana=true;}}
document.getElementById("footer_carta").innerHTML="";document.getElementById("body_carta").innerHTML="";document.getElementById("box_titulo").innerHTML="";$.ajax({url:envio,data:parametros,type:"post",beforeSend:function(){waitingDialog.show();},complete:function(){waitingDialog.hide();},success:function(data){if(data.estado=="0"){if(data.data.adjunto!=null)
myBase64string=data.data.adjunto;if(enVentana==false){var dWidth=ancho-40;var dHeight=alto-40;var htmlContenido="";var objbuilder='';if(data.certificado!=null){htmlCertificado=""
htmlCertificado+="            <a download='Certificado' href='data:application/pdf;base64,"+data.certificado+"' title='Certificado ' >";htmlCertificado+="                 <div class='box_adjunto'><div class='icono_carta'><i class='fa fa-file'></i></div>";htmlCertificado+="                <div class='texto_carta'>";htmlCertificado+="                    <span>Certificado de envío</span><i class='fa fa-download'></i> </div><div class='corner'></div>";htmlCertificado+="                </div>";htmlCertificado+="            </a>";}else{htmlCertificado="";}
if(view!=2&&view!=9&&view!=8){$("#remitente").show()
$("#footer_carta").show();htmlString="<p><b>Desde: </b><span>"+data.data.from+"</span></p>";htmlString+="<p><b>Para: </b><span>"+data.data.to+"</span></p>";document.getElementById("remitente").innerHTML=htmlString;var htmlCabecera="";htmlCabecera+="<div class='ic_mail'><div class='ic_correo'></div></div>";htmlCabecera+="<h1>Asunto: <b >"+data.data.asunto+"</b></h1>";htmlCabecera+="<h2>"+formatPeriodo(fecha,'dd-MM-yyyy')+"</h2>";htmlCabecera+="<div class='clearfix'></div>";$("#box_titulo").html(htmlCabecera);$("#body_carta").html(data.data.body);if(myBase64string!=""){htmlAttach+="        <div class='centrar'>";htmlAttach+="<p><i class='fa fa-paperclip'></i><span>Documentos adjuntos:</span></p>";htmlAttach+="  <div class='clearfix'></div>";for(var i=0;i<myBase64string.length;i++){var valor=myBase64string[i];base64file=valor.data;base64fileName=(valor.name!=null?valor.name:"adjunto"+i);htmlAttach+="            <a download="+base64fileName+" href='data:application/pdf;base64,"+base64file+"' title='"+base64fileName+"' >";htmlAttach+="                <div class='box_adjunto'> <div class='icono_carta'><i class='fa fa-file'></i></div>";htmlAttach+="                <div class='texto_carta'>";htmlAttach+="                    <span>"+base64fileName+"</span> <i class='fa fa-download'></i> </div><div class='corner'></div>";htmlAttach+="                </div>";htmlAttach+="            </a>";}
if(htmlCertificado!=""){htmlAttach+=htmlCertificado;}
htmlAttach+="        </div>";document.getElementById("footer_carta").innerHTML=htmlAttach;}else{htmlAttach="";}}else{if(myBase64string!=""){var htmlCabecera="";htmlCabecera+="<div class='ic_mail'><div class='ic_correo'></div></div>";htmlCabecera+="<h1>Asunto: <b > Documento"+sid+"</b></h1>";htmlCabecera+="<h2>"+formatPeriodo(fecha,'dd-MM-yyyy')+"</h2><br/>";htmlCabecera+="<div class='clearfix'></div>";document.getElementById("box_titulo").innerHTML=htmlCabecera;document.getElementById("remitente").innerHTML="";$("#remitente").hide()
$("#footer_carta").hide();if(myBase64string.length>0){base64file=myBase64string[0].data;if(base64file!=null){objbuilder+=('<object width="100%" height="700px" data="data:application/pdf;base64,');objbuilder+=(base64file);objbuilder+=('" type="application/pdf" class="internal">');objbuilder+=('<embed src="data:application/pdf;base64,');objbuilder+=(base64file);objbuilder+=('" type="application/pdf" />');objbuilder+=('</object>');}else{alert("no es posible leer la carta, Reintente más tarde.");return;}}
document.getElementById("body_carta").innerHTML=objbuilder;;}}}else{var newwindow=window.open(envio+parametros,'','scrollbars=yes,menubar=0,toolbar=0,location=0,height=800,width=1000,resizable=yes,toolbar=no,location=no,status=yes');if(window.focus){newwindow.focus()}}}else{htmlString="<p>No se puedo realizar la operación en este momento</p>";}
var w=1000;var h=800;var left=Number((screen.width/2)-(w/2));var tops=Number((screen.height/2)-(h/2));$("body").css("overflow","hidden");$("#misii_overlay").fadeIn();return;var win=window.open("","_blank",'toolbar=no, location=no, directories=no, status=yesy, menubar=no, scrollbars=yes, resizable=yes, copyhistory=no, width='+w+', height='+h+', top='+tops+', left='+left);win.document.title="Documento ";win.document.write('<!DOCTYPE html><html lang="esp"><head>');win.document.write('<title>Documento '+sid+'</title>');win.document.write("<link href='https://edm9000.sii.cl:8338/misii/css/misii.css' rel='stylesheet'/>");win.document.write('</head>');win.document.write('<body>');win.document.write(htmlAttach);win.document.write("<div id='cabecera_carta'>");win.document.write("<div class='centrar'>");win.document.write("<img id='logo_carta' src='/misii/img/logo.png'/>");win.document.write("</div>    </div>");if(view!=2&&view!=9&&view!=8){win.document.write('<h2 class="tipo_carta">');win.document.write('</h2>');win.document.write('<div id="carta"><div class="centrar">');win.document.write('<div id="box_titulo">');win.document.write('<h1>Actualización de fechas de pago</h1>');win.document.write('<h2>Documento '+sid+'</h2></div>');win.document.write(htmlString);win.document.write('<br><hr>');win.document.write('</div></div>');}else{win.document.write(htmlString);}
win.document.write('</body></html>');layer=jQuery(win.document);},dataType:"json",timeout:45000,cache:false,error:function(){alert("En este momento no podemos atenderlo, por favor int\u00e9ntelo m\u00e1s tarde.");$(this).attr("disabled","false");}});}
function viewNotificaciones(sid,view){var newwindow;var enVentana=false;var parametros="";var position=0;var end=0
var version=0;var ancho=1024;var alto=720;parametros=parametros+"&opc="+view;;parametros=parametros+"&repoId="+sid+"&rnd="+Math.random();;$("#dialog-container").html(waitdoMsg);if(navigator.userAgent.search("MSIE")>=0){var position=navigator.userAgent.search("MSIE")+5;var end=navigator.userAgent.search("; Windows");var version=navigator.userAgent.substring(position,end);if(version<7){enVentana=true;}}
if(enVentana==false){$("dialog-cartas").dialog({resizable:true,modal:true,buttons:{Cerrar:function(){$(this).dialog("close");}}});var dWidth=ancho-40;var dHeight=alto-40;var htmlContenido="";htmlContenido+='<object id="viewer" width="'+dWidth+'" height="'+dHeight+'">';htmlContenido+='<param name="wmode" value="transparent" />';htmlContenido+='<embed id="embeddedPlayer" src="'+envio+parametros+'" type="application/pdf" allowfullscreen="true" width="'+dWidth+'" height="'+dHeight+'" wmode="transparent">';htmlContenido+=waitdoMsg+'</embed></object>';$("#dialog-container").html(htmlContenido);}else{var newwindow=window.open(envio+parametros,'','scrollbars=yes,menubar=0,toolbar=0,location=0,height=600,width=800,resizable=yes,toolbar=no,location=no,status=yes');if(window.focus){newwindow.focus()}}}
function call_mainact(){var cContainer="contenido-mis-datos";var sLoader="sucxl";var mthd="POST";var URLgo="";var qrstrng="";var tpRspns="html"
var cargBox="";var strHtml="";if(callMainactEstad==1)return;URLgo="/cgi_misii/CViewCarta.cgi";tpRspns="json";params="opc=27&VIEW=1";$.ajax({type:'POST',url:URLgo+qrstrng,dataType:tpRspns,async:false,data:params,timeout:15000,cache:false,success:function(response){var dataResponse=response;if(response.codigoError==0){if(response.cumpleValidacion=="S"){var pageurl="";if(urlExt()){pageurl="https://taitao.sii.cl/actividadprincipalinternetui/#/home";}else{pageurl="https://www4.sii.cl/actividadprincipalinternetui/#/home";}
$("#iframeMainAct").attr("src",pageurl);$('#myMainActeco').modal({backdrop:true})}
if(response.cumpleValidacion=="N"){callMainactEstad=1;}}else{if(response.cumpleValidacion=="N"){callMainactEstad=1;}}}});}
function linkexterno(opc){var urlString="";var urlsee="";switch(opc){case 1:if(urlExt()){urlsee="https://emin.sii.cl/seeui/see/internet";urlString=urlsee;}else{urlsee="https://www4.sii.cl/seeui/see/internet/#/see";var obj234=objectFindByKey(menuSOL.opciones,'id',2348);if(obj234){opt=obj234.url.indexOf('suspension')
if(opt>0){urlString=obj234.url;}else{urlString=urlsee;}}else{urlString=urlsee;}}
break;case 2:if(urlExt()){urlString="https://emin.sii.cl/sasiadmInternet/index.html?form=grillaSolicitudesInternet#grillaSolicitudes";}else{urlString="https://www4.sii.cl/sasiadmInternet/index.html?form=grillaSolicitudesInternet#grillaSolicitudes";}
break;case 3:if(urlExt()){urlString="https://webintqa.sii.cl:8443/cgi_AUT2000/autValidaMovilEmail.cgi";}else{var str=objectFindByKey(menuSOL.opciones,'id',1128);if(str){urlString=str.url;}else
urlString="https://zeusr.sii.cl/cgi_AUT2000/autValidaMovilEmail.cgi";}
break;case 4:if(urlExt()){urlString="https://emin.sii.cl/corenoti1Internet/#menu";}else{var str=objectFindByKey(menuSOL.opciones,'id',1103);if(str){urlString=str.url;}else
urlString="https://www4.sii.cl/corenoti1Internet/#menu";}
break;case 5:if(urlExt()){urlString="https://emin.sii.cl/modificacioncntrui/#/modificadomicilio";}else{var str=objectFindByKey(menuSOL.opciones,'id',1126);if(str){urlString=str.url;}else
urlString="https://www4.sii.cl/modificacioncntrui/#/modificadomicilio";}
break;case 6:if(urlExt()){urlString="https://emin.sii.cl/modificacioncntrui/#/modificagiros";}else{var str=objectFindByKey(menuSOL.opciones,'id',1129);if(str){urlString=str.url;}else
urlString="https://www4.sii.cl/modificacioncntrui/#/modificagiros";}
break;case 7:if(urlExt()){urlString="https://emin.sii.cl/modificacionesiainternetui/#!/menuGeneral";}else{var str=objectFindByKey(menuSOL.opciones,'id',3738);if(str){urlString=str.url;}else
urlString="https://www4.sii.cl/modificacionesiainternetui/#!/menuGeneral";}
break;case 8:if(urlExt()){urlString="https://emin.sii.cl/modificacioncntrui/#/modificasucursal";}else{var str=objectFindByKey(menuSOL.opciones,'id',1130);if(str){urlString=str.url;}else
urlString="https://www4.sii.cl/modificacioncntrui/#/modificasucursal";}
break;case 9:if(urlExt()){urlString="https://emin.sii.cl/cuotaanualbienesraicespubinternetui/#!/buscaRolPagos";}else{var str=objectFindByKey(menuSOL.opciones,'id',2624);if(str){urlString=str.url;}else
urlString="https://www4.sii.cl/cuotaanualbienesraicespubinternetui/#!/buscaRolPagos";}
break;case 10:var str=objectFindByKey(menuSOL.opciones,'id',1059);if(urlExt()){urlString="https://emin.sii.cl/inicioActividadesInternet/?menu=inicio";}else{if(str){urlString=str.url;}else
urlString="https://www4.sii.cl/inicioActividadesInternet/?menu=inicio";}
break;case 11:var str=objectFindByKey(menuSOL.opciones,'id',3270);if(urlExt()){urlString="https://emin.sii.cl/propuestaf29ui/internet/";}else{if(str){urlString=str.url;}else
urlString="https://www4.sii.cl/propuestaf29ui/internet/";}
break;case 12:var str=objectFindByKey(menuSOL.opciones,'id',2625);if(urlExt()){urlString="https://emin.sii.cl/cuotaanualbienesraicesinternetui/#!/authBuscaRolPago";}else{if(str){urlString=str.url;}else
urlString="https://www4.sii.cl/cuotaanualbienesraicesinternetui/#!/authBuscaRolPago";}
break;case 13:var str=objectFindByKey(menuSOL.opciones,'id',2576);if(urlExt()){urlString="https://edmd.sii.cl:1331/avalu/br/br_busrut.htm";}else{if(str){urlString=str.url;}else
urlString="https://zeus.sii.cl/avalu/br/br_busrut.htm";}
break;}
if(urlString!="")
urlnewwindows(urlString);}
function seeLink(){var urlString="";if(urlExt()){urlString="https://emin.sii.cl/seeui/see/internet";}else{urlString="https://www4.sii.cl/seeui/see/internet/#/see";}
urlnewwindows(urlString);}
function urlnewwindows(urlString){var a=document.createElement('a');a.href=urlString;a.target='_blank';document.body.appendChild(a);a.click();document.body.removeChild(a);}
function urlExt(){var ret=false;var url=window.location.href;if(url.search("edm9000")>0||url.search("webintqa")>0){ret=true;}
return ret;}
function mensajeMsg(data){$.createModalEmergente({title:'Mensajes Informativos',message:data,closeButton:true,scrollable:false});return false;}
function notificaionesCorrespondencia(data){$.createModalNotificaciones({title:'Notificaciones SII',message:data,closeButton:true,scrollable:false});return false;}
function gcoo(n){c=" "+document.cookie;s=" "+n+"=";st=null;o=0;e=0;if(c.length>0){o=c.indexOf(s);if(o!=-1){o+=s.length;e=c.indexOf(";",o);if(e==-1){e=c.length;};st=unescape(c.substring(o,e));}}
return st;}
function ventana_mensaje(){ajaxload(10,"OPT=23&VIEW=1");}
function LocalStatorageSaveValue(key,value){if(typeof(Storage)!=="undefined"){localStorage.setItem(key,value);}else{alert('Browser no soporta WebStorage');}}
function ajaxload(opt,params){var vr="";vr=gcoo("EMG");if((vr==null)||(emgrut!=vr)){loadmsg(opt,params,1)}}
function loadmsg(opt,params,window){if(cacheAlertas!="")return;$.ajax({type:"post",url:"/cgi_misii/client001.cgi",data:params,dataType:"text",cache:false,success:function(data){var n=0;var nodata=0;n=data.indexOf("En estos momentos no podemos atender su consulta");nodata=data.indexOf("no tiene mensajes");if(nodata>0&&window==1)return;if(n<=0){mensajeMsg(data);cacheAlertas=data;}}});}
function callMessage(){var params='OPT=23&VIEW=1&rnd='+Math.random();containerIbox="contenido-mis-InBox";if(cacheAlertas==""){$.ajax({type:"post",url:"/cgi_misii/client001.cgi",data:params,dataType:"text",cache:false,beforeSend:function(){waitingDialog.show();},complete:function(){waitingDialog.hide();},success:function(data){var n=0;var nodata=0;n=data.indexOf("En estos momentos no podemos atender su consulta");nodata=data.indexOf("No existen Alertas");if(nodata>0&&window==1)return;if(n<=0){$('#'+containerIbox).html(data);cacheAlertas=data;}}});}else{$('#'+containerIbox).html(cacheAlertas);}}
function callSituacionTrib(){var params='OPT=8&VIEW=1&rnd='+Math.random();containerIbox="notiInformativos";if(situacionCache==""){$.ajax({type:"post",url:"/cgi_misii/client001.cgi",data:params,dataType:"text",cache:false,beforeSend:function(){waitingDialog.show();},complete:function(){waitingDialog.hide();},success:function(data){var n=0;var nodata=0;n=data.indexOf("En estos momentos no podemos atender su consulta");nodata=data.indexOf("No existen Alertas");if(nodata>0&&window==1)return;if(n<=0){$('#'+containerIbox).html(data);situacionCache=data;}}});}}
function callMessageBBRR(){var params='OPT=9&VIEW=1&rnd='+Math.random();containerIbox="divPropiedades";$.ajax({type:"post",url:"/cgi_misii/client001.cgi",data:params,dataType:"text",cache:false,beforeSend:function(){waitingDialog.show();},complete:function(){waitingDialog.hide();},success:function(data){var n=0;var nodata=0;n=data.indexOf("En estos momentos no podemos atender su consulta");nodata=data.indexOf("No existen Alertas");if(nodata>0&&window==1)return;if(n<=0){$('#'+containerIbox).html(data);}}});}
function number_format(amount,decimals){amount+='';amount=parseFloat(amount.replace(/[^0-9\.]/g,''));decimals=decimals||0;if(isNaN(amount)||amount===0)
return parseFloat(0).toFixed(decimals);amount=''+amount.toFixed(decimals);var amount_parts=amount.split('.'),regexp=/(\d+)(\d{3})/;while(regexp.test(amount_parts[0]))
amount_parts[0]=amount_parts[0].replace(regexp,'$1'+'.'+'$2');return amount_parts.join(',');}
function printerC(Contents){var advprint="Esta información corresponde a la que esta disponible en la base de datos del Servicio de Impuestos Internos el día y hora de esta impresión";var contents=$("#panelDataPersonal").html();var f=new Date();var d2Fecha=f.getDate()+"/"+(f.getMonth()+1)+"/"+f.getFullYear()+" a las "+f.getHours()+":"+f.getMinutes()+" horas";contents+=$("#"+Contents).html();var frame1=$('<iframe>');frame1[0].name="frame1";$("body").append(frame1);var frameDoc=frame1[0].contentWindow?frame1[0].contentWindow:frame1[0].contentDocument.document?frame1[0].contentDocument.document:frame1[0].contentDocument;frameDoc.document.open();frameDoc.document.write('<html><head>');frameDoc.document.write('<title></title>');frameDoc.document.write('<script type="text/javascript" src="https://zeusr.sii.cl/admin/responsive_barranav.js"></script>');frameDoc.document.write('<style>');frameDoc.document.write('body{-webkit-print-color-adjust:exact;}');frameDoc.document.write('table{width: 100%;}');frameDoc.document.write('table tr th {font-size:11px; width: auto; padding:2px 4px; background-color: #999999 !important; color: #ffffff !important;}');frameDoc.document.write('table tr td {font-size:11px; padding:2px 6px;}');frameDoc.document.write('h2 {font-size:16px; font-weight:bold; margin-top: 0; margin-bottom: 5px;}');frameDoc.document.write('div.header{display: block; text-align: center; repeat-on-break: auto; }');frameDoc.document.write('@page{@top-center{content: element(header); repeat-on-break: auto; }}');frameDoc.document.write('</style>');frameDoc.document.write('</head><body>');frameDoc.document.write('<div id="box_header_print" style="width:calc(100%); height: 50px; margin-left:5px; position: relative;">');frameDoc.document.write('<img src="/misii/img/ic_print_logo.jpg" alt="Logo Sii" style="width: 120px;height:auto;margin-top:18px;margin-left:2px; float:left;">');frameDoc.document.write('<img src="/misii/img/ic_print_sello.png" alt="Sello Sii" style="width: 120px;height:auto;margin-top:0px;margin-right:20px; float: right;">');frameDoc.document.write('</div>');frameDoc.document.write('<div style="margin-top:-5px; height: 60px;text-align: center;font-size:20px"><b> MiSII</b></div>');frameDoc.document.write('<div style="margin-left:18px; margin-top:0px; height: 25px;text-align: left;"><b>Nombre o Razón social:  '+minombreMisii+'</b></div><br/>');frameDoc.document.write('<div style="margin-left:18px; height: 25px;text-align: left;"><b>RUT: '+miRutMISII+'</b></div>');frameDoc.document.write('<div style="border-bottom:1px solid #ccc; margin-left:18px; padding-bottom:10px; margin-bottom:15px; text-align: justify;">El Servicio de Impuestos Internos certifica que esta información corresponde a la que se encuentra disponible en las bases de datos del SII el día ');frameDoc.document.write(d2Fecha+'.</div>');contents=contents.replace("undefined","");frameDoc.document.write(contents);frameDoc.document.write('</body></html>');frameDoc.document.close();setTimeout(function(){window.frames["frame1"].focus();window.frames["frame1"].print();frame1.remove();},500);}
function cmenus(){var barside=$("#sidebar").data("mmenu");barside.close();}
var format=function(time,format){var t=new Date(time);var tf=function(i){return(i<10?'0':'')+i};return format.replace(/yyyy|MM|dd|HH|mm|ss/g,function(a){switch(a){case'yyyy':return tf(t.getFullYear());break;case'MM':return tf(t.getMonth()+1);break;case'mm':return tf(t.getMinutes());break;case'dd':return tf(t.getDate());break;case'HH':return tf(t.getHours());break;case'ss':return tf(t.getSeconds());break;}})}
var formatPeriodo=function(time,format){if(time==null)return"";if(time=="-")return"";var meses=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]
var tDate=new Date(time);var dia=tDate.getDate();var mes=tDate.getMonth();var yyy=tDate.getFullYear();var periodo=meses[mes]+',  '+yyy;return periodo;}